<!DOCTYPE html>
<html>
   <head>
      <title>env\Lib\site-packages\urllib3\connection.py - flake8 annotated source</title>
      <meta http-equiv="Content-Type" value="text/html; charset=UTF-8">
      <link rel="stylesheet" href="styles.css">
   </head>
   <body>
      <div id="masthead" class="sev-2"></div>
      <div id="page">
         <h1>
            <a href="env.Lib.site-packages.urllib3.connection.report.html">
               <img src="back.svg" alt="&#x2B05;">
               env\Lib\site-packages\urllib3\connection.py source
            </a>
         </h1>

         <div id="doc">
            <div id="l1"
               class="code sev- "><tt><i>1</i> <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span></tt>
            </div>
            <div id="l2"
               class="code sev- "><tt><i>2</i> &nbsp;</tt>
            </div>
            <div id="l3"
               class="code sev- "><tt><i>3</i> <span class="kn">import</span> <span class="nn">datetime</span></tt>
            </div>
            <div id="l4"
               class="code sev- "><tt><i>4</i> <span class="kn">import</span> <span class="nn">http.client</span></tt>
            </div>
            <div id="l5"
               class="code sev- "><tt><i>5</i> <span class="kn">import</span> <span class="nn">logging</span></tt>
            </div>
            <div id="l6"
               class="code sev- "><tt><i>6</i> <span class="kn">import</span> <span class="nn">os</span></tt>
            </div>
            <div id="l7"
               class="code sev- "><tt><i>7</i> <span class="kn">import</span> <span class="nn">re</span></tt>
            </div>
            <div id="l8"
               class="code sev- "><tt><i>8</i> <span class="kn">import</span> <span class="nn">socket</span></tt>
            </div>
            <div id="l9"
               class="code sev- "><tt><i>9</i> <span class="kn">import</span> <span class="nn">sys</span></tt>
            </div>
            <div id="l10"
               class="code sev- "><tt><i>10</i> <span class="kn">import</span> <span class="nn">threading</span></tt>
            </div>
            <div id="l11"
               class="code sev- "><tt><i>11</i> <span class="kn">import</span> <span class="nn">typing</span></tt>
            </div>
            <div id="l12"
               class="code sev- "><tt><i>12</i> <span class="kn">import</span> <span class="nn">warnings</span></tt>
            </div>
            <div id="l13"
               class="code sev- "><tt><i>13</i> <span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">HTTPConnection</span> <span class="k">as</span> <span class="n">_HTTPConnection</span></tt>
            </div>
            <div id="l14"
               class="code sev- "><tt><i>14</i> <span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">HTTPException</span> <span class="k">as</span> <span class="n">HTTPException</span>  <span class="c1"># noqa: F401</span></tt>
            </div>
            <div id="l15"
               class="code sev- "><tt><i>15</i> <span class="kn">from</span> <span class="nn">http.client</span> <span class="kn">import</span> <span class="n">ResponseNotReady</span></tt>
            </div>
            <div id="l16"
               class="code sev- "><tt><i>16</i> <span class="kn">from</span> <span class="nn">socket</span> <span class="kn">import</span> <span class="n">timeout</span> <span class="k">as</span> <span class="n">SocketTimeout</span></tt>
            </div>
            <div id="l17"
               class="code sev- "><tt><i>17</i> &nbsp;</tt>
            </div>
            <div id="l18"
               class="code sev- "><tt><i>18</i> <span class="k">if</span> <span class="n">typing</span><span class="o">.</span><span class="n">TYPE_CHECKING</span><span class="p">:</span></tt>
            </div>
            <div id="l19"
               class="code sev- "><tt><i>19</i>     <span class="kn">from</span> <span class="nn">.response</span> <span class="kn">import</span> <span class="n">HTTPResponse</span></tt>
            </div>
            <div id="l20"
               class="code sev- "><tt><i>20</i>     <span class="kn">from</span> <span class="nn">.util.ssl_</span> <span class="kn">import</span> <span class="n">_TYPE_PEER_CERT_RET_DICT</span></tt>
            </div>
            <div id="l21"
               class="code sev- "><tt><i>21</i>     <span class="kn">from</span> <span class="nn">.util.ssltransport</span> <span class="kn">import</span> <span class="n">SSLTransport</span></tt>
            </div>
            <div id="l22"
               class="code sev- "><tt><i>22</i> &nbsp;</tt>
            </div>
            <div id="l23"
               class="code sev- "><tt><i>23</i> <span class="kn">from</span> <span class="nn">._collections</span> <span class="kn">import</span> <span class="n">HTTPHeaderDict</span></tt>
            </div>
            <div id="l24"
               class="code sev- "><tt><i>24</i> <span class="kn">from</span> <span class="nn">.http2</span> <span class="kn">import</span> <span class="n">probe</span> <span class="k">as</span> <span class="n">http2_probe</span></tt>
            </div>
            <div id="l25"
               class="code sev- "><tt><i>25</i> <span class="kn">from</span> <span class="nn">.util.response</span> <span class="kn">import</span> <span class="n">assert_header_parsing</span></tt>
            </div>
            <div id="l26"
               class="code sev- "><tt><i>26</i> <span class="kn">from</span> <span class="nn">.util.timeout</span> <span class="kn">import</span> <span class="n">_DEFAULT_TIMEOUT</span><span class="p">,</span> <span class="n">_TYPE_TIMEOUT</span><span class="p">,</span> <span class="n">Timeout</span></tt>
            </div>
            <div id="l27"
               class="code sev- "><tt><i>27</i> <span class="kn">from</span> <span class="nn">.util.util</span> <span class="kn">import</span> <span class="n">to_str</span></tt>
            </div>
            <div id="l28"
               class="code sev- "><tt><i>28</i> <span class="kn">from</span> <span class="nn">.util.wait</span> <span class="kn">import</span> <span class="n">wait_for_read</span></tt>
            </div>
            <div id="l29"
               class="code sev- "><tt><i>29</i> &nbsp;</tt>
            </div>
            <div id="l30"
               class="code sev- "><tt><i>30</i> <span class="k">try</span><span class="p">:</span>  <span class="c1"># Compiled with SSL?</span></tt>
            </div>
            <div id="l31"
               class="code sev- "><tt><i>31</i>     <span class="kn">import</span> <span class="nn">ssl</span></tt>
            </div>
            <div id="l32"
               class="code sev- "><tt><i>32</i> &nbsp;</tt>
            </div>
            <div id="l33"
               class="code sev- "><tt><i>33</i>     <span class="n">BaseSSLError</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLError</span></tt>
            </div>
            <div id="l34"
               class="code sev- "><tt><i>34</i> <span class="k">except</span> <span class="p">(</span><span class="ne">ImportError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span></tt>
            </div>
            <div id="l35"
               class="code sev- "><tt><i>35</i>     <span class="n">ssl</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore[assignment]</span></tt>
            </div>
            <div id="l36"
               class="code sev- "><tt><i>36</i> &nbsp;</tt>
            </div>
            <div id="l37"
               class="code sev- "><tt><i>37</i>     <span class="k">class</span> <span class="nc">BaseSSLError</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>  <span class="c1"># type: ignore[no-redef]</span></tt>
            </div>
            <div id="l38"
               class="code sev- "><tt><i>38</i>         <span class="k">pass</span></tt>
            </div>
            <div id="l39"
               class="code sev- "><tt><i>39</i> &nbsp;</tt>
            </div>
            <div id="l40"
               class="code sev- "><tt><i>40</i> &nbsp;</tt>
            </div>
            <div id="l41"
               class="code sev- "><tt><i>41</i> <span class="kn">from</span> <span class="nn">._base_connection</span> <span class="kn">import</span> <span class="n">_TYPE_BODY</span></tt>
            </div>
            <div id="l42"
               class="code sev- "><tt><i>42</i> <span class="kn">from</span> <span class="nn">._base_connection</span> <span class="kn">import</span> <span class="n">ProxyConfig</span> <span class="k">as</span> <span class="n">ProxyConfig</span></tt>
            </div>
            <div id="l43"
               class="code sev- "><tt><i>43</i> <span class="kn">from</span> <span class="nn">._base_connection</span> <span class="kn">import</span> <span class="n">_ResponseOptions</span> <span class="k">as</span> <span class="n">_ResponseOptions</span></tt>
            </div>
            <div id="l44"
               class="code sev- "><tt><i>44</i> <span class="kn">from</span> <span class="nn">._version</span> <span class="kn">import</span> <span class="n">__version__</span></tt>
            </div>
            <div id="l45"
               class="code sev- "><tt><i>45</i> <span class="kn">from</span> <span class="nn">.exceptions</span> <span class="kn">import</span> <span class="p">(</span></tt>
            </div>
            <div id="l46"
               class="code sev- "><tt><i>46</i>     <span class="n">ConnectTimeoutError</span><span class="p">,</span></tt>
            </div>
            <div id="l47"
               class="code sev- "><tt><i>47</i>     <span class="n">HeaderParsingError</span><span class="p">,</span></tt>
            </div>
            <div id="l48"
               class="code sev- "><tt><i>48</i>     <span class="n">NameResolutionError</span><span class="p">,</span></tt>
            </div>
            <div id="l49"
               class="code sev- "><tt><i>49</i>     <span class="n">NewConnectionError</span><span class="p">,</span></tt>
            </div>
            <div id="l50"
               class="code sev- "><tt><i>50</i>     <span class="n">ProxyError</span><span class="p">,</span></tt>
            </div>
            <div id="l51"
               class="code sev- "><tt><i>51</i>     <span class="n">SystemTimeWarning</span><span class="p">,</span></tt>
            </div>
            <div id="l52"
               class="code sev- "><tt><i>52</i> <span class="p">)</span></tt>
            </div>
            <div id="l53"
               class="code sev- "><tt><i>53</i> <span class="kn">from</span> <span class="nn">.util</span> <span class="kn">import</span> <span class="n">SKIP_HEADER</span><span class="p">,</span> <span class="n">SKIPPABLE_HEADERS</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">ssl_</span></tt>
            </div>
            <div id="l54"
               class="code sev- "><tt><i>54</i> <span class="kn">from</span> <span class="nn">.util.request</span> <span class="kn">import</span> <span class="n">body_to_chunks</span></tt>
            </div>
            <div id="l55"
               class="code sev- "><tt><i>55</i> <span class="kn">from</span> <span class="nn">.util.ssl_</span> <span class="kn">import</span> <span class="n">assert_fingerprint</span> <span class="k">as</span> <span class="n">_assert_fingerprint</span></tt>
            </div>
            <div id="l56"
               class="code sev- "><tt><i>56</i> <span class="kn">from</span> <span class="nn">.util.ssl_</span> <span class="kn">import</span> <span class="p">(</span></tt>
            </div>
            <div id="l57"
               class="code sev- "><tt><i>57</i>     <span class="n">create_urllib3_context</span><span class="p">,</span></tt>
            </div>
            <div id="l58"
               class="code sev- "><tt><i>58</i>     <span class="n">is_ipaddress</span><span class="p">,</span></tt>
            </div>
            <div id="l59"
               class="code sev- "><tt><i>59</i>     <span class="n">resolve_cert_reqs</span><span class="p">,</span></tt>
            </div>
            <div id="l60"
               class="code sev- "><tt><i>60</i>     <span class="n">resolve_ssl_version</span><span class="p">,</span></tt>
            </div>
            <div id="l61"
               class="code sev- "><tt><i>61</i>     <span class="n">ssl_wrap_socket</span><span class="p">,</span></tt>
            </div>
            <div id="l62"
               class="code sev- "><tt><i>62</i> <span class="p">)</span></tt>
            </div>
            <div id="l63"
               class="code sev- "><tt><i>63</i> <span class="kn">from</span> <span class="nn">.util.ssl_match_hostname</span> <span class="kn">import</span> <span class="n">CertificateError</span><span class="p">,</span> <span class="n">match_hostname</span></tt>
            </div>
            <div id="l64"
               class="code sev- "><tt><i>64</i> <span class="kn">from</span> <span class="nn">.util.url</span> <span class="kn">import</span> <span class="n">Url</span></tt>
            </div>
            <div id="l65"
               class="code sev- "><tt><i>65</i> &nbsp;</tt>
            </div>
            <div id="l66"
               class="code sev- "><tt><i>66</i> <span class="c1"># Not a no-op, we&#39;re adding this to the namespace so it can be imported.</span></tt>
            </div>
            <div id="l67"
               class="code sev- "><tt><i>67</i> <span class="ne">ConnectionError</span> <span class="o">=</span> <span class="ne">ConnectionError</span></tt>
            </div>
            <div id="l68"
               class="code sev- "><tt><i>68</i> <span class="ne">BrokenPipeError</span> <span class="o">=</span> <span class="ne">BrokenPipeError</span></tt>
            </div>
            <div id="l69"
               class="code sev- "><tt><i>69</i> &nbsp;</tt>
            </div>
            <div id="l70"
               class="code sev- "><tt><i>70</i> &nbsp;</tt>
            </div>
            <div id="l71"
               class="code sev- "><tt><i>71</i> <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span></tt>
            </div>
            <div id="l72"
               class="code sev- "><tt><i>72</i> &nbsp;</tt>
            </div>
            <div id="l73"
               class="code sev- "><tt><i>73</i> <span class="n">port_by_scheme</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s2">&quot;https&quot;</span><span class="p">:</span> <span class="mi">443</span><span class="p">}</span></tt>
            </div>
            <div id="l74"
               class="code sev- "><tt><i>74</i> &nbsp;</tt>
            </div>
            <div id="l75"
               class="code sev- "><tt><i>75</i> <span class="c1"># When it comes time to update this value as a part of regular maintenance</span></tt>
            </div>
            <div id="l76"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (82 > 79 characters)</li>
               
               </ul><tt><i>76</i> <span class="c1"># (ie test_recent_date is failing) update it to ~6 months before the current date.</span></tt>
            </div>
            <div id="l77"
               class="code sev- "><tt><i>77</i> <span class="n">RECENT_DATE</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></tt>
            </div>
            <div id="l78"
               class="code sev- "><tt><i>78</i> &nbsp;</tt>
            </div>
            <div id="l79"
               class="code sev- "><tt><i>79</i> <span class="n">_CONTAINS_CONTROL_CHAR_RE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[^-!#$%&amp;&#39;*+.^_`|~0-9a-zA-Z]&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l80"
               class="code sev- "><tt><i>80</i> &nbsp;</tt>
            </div>
            <div id="l81"
               class="code sev- "><tt><i>81</i> <span class="n">_HAS_SYS_AUDIT</span> <span class="o">=</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">sys</span><span class="p">,</span> <span class="s2">&quot;audit&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l82"
               class="code sev- "><tt><i>82</i> &nbsp;</tt>
            </div>
            <div id="l83"
               class="code sev- "><tt><i>83</i> &nbsp;</tt>
            </div>
            <div id="l84"
               class="code sev- "><tt><i>84</i> <span class="k">class</span> <span class="nc">HTTPConnection</span><span class="p">(</span><span class="n">_HTTPConnection</span><span class="p">):</span></tt>
            </div>
            <div id="l85"
               class="code sev- "><tt><i>85</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l86"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (82 > 79 characters)</li>
               
               </ul><tt><i>86</i> <span class="sd">    Based on :class:`http.client.HTTPConnection` but provides an extra constructor</span></tt>
            </div>
            <div id="l87"
               class="code sev- "><tt><i>87</i> <span class="sd">    backwards-compatibility layer between older and newer Pythons.</span></tt>
            </div>
            <div id="l88"
               class="code sev- "><tt><i>88</i> &nbsp;</tt>
            </div>
            <div id="l89"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>89</i> <span class="sd">    Additional keyword parameters are used to configure attributes of the connection.</span></tt>
            </div>
            <div id="l90"
               class="code sev- "><tt><i>90</i> <span class="sd">    Accepted parameters include:</span></tt>
            </div>
            <div id="l91"
               class="code sev- "><tt><i>91</i> &nbsp;</tt>
            </div>
            <div id="l92"
               class="code sev- "><tt><i>92</i> <span class="sd">    - ``source_address``: Set the source address for the current connection.</span></tt>
            </div>
            <div id="l93"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (95 > 79 characters)</li>
               
               </ul><tt><i>93</i> <span class="sd">    - ``socket_options``: Set specific options on the underlying socket. If not specified, then</span></tt>
            </div>
            <div id="l94"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (97 > 79 characters)</li>
               
               </ul><tt><i>94</i> <span class="sd">      defaults are loaded from ``HTTPConnection.default_socket_options`` which includes disabling</span></tt>
            </div>
            <div id="l95"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (88 > 79 characters)</li>
               
               </ul><tt><i>95</i> <span class="sd">      Nagle&#39;s algorithm (sets TCP_NODELAY to 1) unless the connection is behind a proxy.</span></tt>
            </div>
            <div id="l96"
               class="code sev- "><tt><i>96</i> &nbsp;</tt>
            </div>
            <div id="l97"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (84 > 79 characters)</li>
               
               </ul><tt><i>97</i> <span class="sd">      For example, if you wish to enable TCP Keep Alive in addition to the defaults,</span></tt>
            </div>
            <div id="l98"
               class="code sev- "><tt><i>98</i> <span class="sd">      you might pass:</span></tt>
            </div>
            <div id="l99"
               class="code sev- "><tt><i>99</i> &nbsp;</tt>
            </div>
            <div id="l100"
               class="code sev- "><tt><i>100</i> <span class="sd">      .. code-block:: python</span></tt>
            </div>
            <div id="l101"
               class="code sev- "><tt><i>101</i> &nbsp;</tt>
            </div>
            <div id="l102"
               class="code sev- "><tt><i>102</i> <span class="sd">         HTTPConnection.default_socket_options + [</span></tt>
            </div>
            <div id="l103"
               class="code sev- "><tt><i>103</i> <span class="sd">             (socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1),</span></tt>
            </div>
            <div id="l104"
               class="code sev- "><tt><i>104</i> <span class="sd">         ]</span></tt>
            </div>
            <div id="l105"
               class="code sev- "><tt><i>105</i> &nbsp;</tt>
            </div>
            <div id="l106"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>106</i> <span class="sd">      Or you may want to disable the defaults by passing an empty list (e.g., ``[]``).</span></tt>
            </div>
            <div id="l107"
               class="code sev- "><tt><i>107</i> <span class="sd">    &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l108"
               class="code sev- "><tt><i>108</i> &nbsp;</tt>
            </div>
            <div id="l109"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>109</i>     <span class="n">default_port</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">ClassVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">port_by_scheme</span><span class="p">[</span><span class="s2">&quot;http&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore[misc]</span></tt>
            </div>
            <div id="l110"
               class="code sev- "><tt><i>110</i> &nbsp;</tt>
            </div>
            <div id="l111"
               class="code sev- "><tt><i>111</i>     <span class="c1">#: Disable Nagle&#39;s algorithm by default.</span></tt>
            </div>
            <div id="l112"
               class="code sev- "><tt><i>112</i>     <span class="c1">#: ``[(socket.IPPROTO_TCP, socket.TCP_NODELAY, 1)]``</span></tt>
            </div>
            <div id="l113"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>113</i>     <span class="n">default_socket_options</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">ClassVar</span><span class="p">[</span><span class="n">connection</span><span class="o">.</span><span class="n">_TYPE_SOCKET_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span></tt>
            </div>
            <div id="l114"
               class="code sev- "><tt><i>114</i>         <span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">IPPROTO_TCP</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">TCP_NODELAY</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span></tt>
            </div>
            <div id="l115"
               class="code sev- "><tt><i>115</i>     <span class="p">]</span></tt>
            </div>
            <div id="l116"
               class="code sev- "><tt><i>116</i> &nbsp;</tt>
            </div>
            <div id="l117"
               class="code sev- "><tt><i>117</i>     <span class="c1">#: Whether this connection verifies the host&#39;s certificate.</span></tt>
            </div>
            <div id="l118"
               class="code sev- "><tt><i>118</i>     <span class="n">is_verified</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l119"
               class="code sev- "><tt><i>119</i> &nbsp;</tt>
            </div>
            <div id="l120"
               class="code sev- "><tt><i>120</i>     <span class="c1">#: Whether this proxy connection verified the proxy host&#39;s certificate.</span></tt>
            </div>
            <div id="l121"
               class="code sev- "><tt><i>121</i>     <span class="c1"># If no proxy is currently connected to the value will be ``None``.</span></tt>
            </div>
            <div id="l122"
               class="code sev- "><tt><i>122</i>     <span class="n">proxy_is_verified</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l123"
               class="code sev- "><tt><i>123</i> &nbsp;</tt>
            </div>
            <div id="l124"
               class="code sev- "><tt><i>124</i>     <span class="n">blocksize</span><span class="p">:</span> <span class="nb">int</span></tt>
            </div>
            <div id="l125"
               class="code sev- "><tt><i>125</i>     <span class="n">source_address</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l126"
               class="code sev- "><tt><i>126</i>     <span class="n">socket_options</span><span class="p">:</span> <span class="n">connection</span><span class="o">.</span><span class="n">_TYPE_SOCKET_OPTIONS</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l127"
               class="code sev- "><tt><i>127</i> &nbsp;</tt>
            </div>
            <div id="l128"
               class="code sev- "><tt><i>128</i>     <span class="n">_has_connected_to_proxy</span><span class="p">:</span> <span class="nb">bool</span></tt>
            </div>
            <div id="l129"
               class="code sev- "><tt><i>129</i>     <span class="n">_response_options</span><span class="p">:</span> <span class="n">_ResponseOptions</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l130"
               class="code sev- "><tt><i>130</i>     <span class="n">_tunnel_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l131"
               class="code sev- "><tt><i>131</i>     <span class="n">_tunnel_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l132"
               class="code sev- "><tt><i>132</i>     <span class="n">_tunnel_scheme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l133"
               class="code sev- "><tt><i>133</i> &nbsp;</tt>
            </div>
            <div id="l134"
               class="code sev- "><tt><i>134</i>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span></tt>
            </div>
            <div id="l135"
               class="code sev- "><tt><i>135</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l136"
               class="code sev- "><tt><i>136</i>         <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l137"
               class="code sev- "><tt><i>137</i>         <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l138"
               class="code sev- "><tt><i>138</i>         <span class="o">*</span><span class="p">,</span></tt>
            </div>
            <div id="l139"
               class="code sev- "><tt><i>139</i>         <span class="n">timeout</span><span class="p">:</span> <span class="n">_TYPE_TIMEOUT</span> <span class="o">=</span> <span class="n">_DEFAULT_TIMEOUT</span><span class="p">,</span></tt>
            </div>
            <div id="l140"
               class="code sev- "><tt><i>140</i>         <span class="n">source_address</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l141"
               class="code sev- "><tt><i>141</i>         <span class="n">blocksize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16384</span><span class="p">,</span></tt>
            </div>
            <div id="l142"
               class="code sev- "><tt><i>142</i>         <span class="n">socket_options</span><span class="p">:</span> <span class="kc">None</span></tt>
            </div>
            <div id="l143"
               class="code sev- "><tt><i>143</i>         <span class="o">|</span> <span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">_TYPE_SOCKET_OPTIONS</span><span class="p">)</span> <span class="o">=</span> <span class="n">default_socket_options</span><span class="p">,</span></tt>
            </div>
            <div id="l144"
               class="code sev- "><tt><i>144</i>         <span class="n">proxy</span><span class="p">:</span> <span class="n">Url</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l145"
               class="code sev- "><tt><i>145</i>         <span class="n">proxy_config</span><span class="p">:</span> <span class="n">ProxyConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l146"
               class="code sev- "><tt><i>146</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l147"
               class="code sev- "><tt><i>147</i>         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span></tt>
            </div>
            <div id="l148"
               class="code sev- "><tt><i>148</i>             <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span></tt>
            </div>
            <div id="l149"
               class="code sev- "><tt><i>149</i>             <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span></tt>
            </div>
            <div id="l150"
               class="code sev- "><tt><i>150</i>             <span class="n">timeout</span><span class="o">=</span><span class="n">Timeout</span><span class="o">.</span><span class="n">resolve_default_timeout</span><span class="p">(</span><span class="n">timeout</span><span class="p">),</span></tt>
            </div>
            <div id="l151"
               class="code sev- "><tt><i>151</i>             <span class="n">source_address</span><span class="o">=</span><span class="n">source_address</span><span class="p">,</span></tt>
            </div>
            <div id="l152"
               class="code sev- "><tt><i>152</i>             <span class="n">blocksize</span><span class="o">=</span><span class="n">blocksize</span><span class="p">,</span></tt>
            </div>
            <div id="l153"
               class="code sev- "><tt><i>153</i>         <span class="p">)</span></tt>
            </div>
            <div id="l154"
               class="code sev- "><tt><i>154</i>         <span class="bp">self</span><span class="o">.</span><span class="n">socket_options</span> <span class="o">=</span> <span class="n">socket_options</span></tt>
            </div>
            <div id="l155"
               class="code sev- "><tt><i>155</i>         <span class="bp">self</span><span class="o">.</span><span class="n">proxy</span> <span class="o">=</span> <span class="n">proxy</span></tt>
            </div>
            <div id="l156"
               class="code sev- "><tt><i>156</i>         <span class="bp">self</span><span class="o">.</span><span class="n">proxy_config</span> <span class="o">=</span> <span class="n">proxy_config</span></tt>
            </div>
            <div id="l157"
               class="code sev- "><tt><i>157</i> &nbsp;</tt>
            </div>
            <div id="l158"
               class="code sev- "><tt><i>158</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l159"
               class="code sev- "><tt><i>159</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l160"
               class="code sev- "><tt><i>160</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l161"
               class="code sev- "><tt><i>161</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l162"
               class="code sev- "><tt><i>162</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_scheme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l163"
               class="code sev- "><tt><i>163</i> &nbsp;</tt>
            </div>
            <div id="l164"
               class="code sev- "><tt><i>164</i>     <span class="nd">@property</span></tt>
            </div>
            <div id="l165"
               class="code sev- "><tt><i>165</i>     <span class="k">def</span> <span class="nf">host</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></tt>
            </div>
            <div id="l166"
               class="code sev- "><tt><i>166</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l167"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (88 > 79 characters)</li>
               
               </ul><tt><i>167</i> <span class="sd">        Getter method to remove any trailing dots that indicate the hostname is an FQDN.</span></tt>
            </div>
            <div id="l168"
               class="code sev- "><tt><i>168</i> &nbsp;</tt>
            </div>
            <div id="l169"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>169</i> <span class="sd">        In general, SSL certificates don&#39;t include the trailing dot indicating a</span></tt>
            </div>
            <div id="l170"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>170</i> <span class="sd">        fully-qualified domain name, and thus, they don&#39;t validate properly when</span></tt>
            </div>
            <div id="l171"
               class="code sev- "><tt><i>171</i> <span class="sd">        checked against a domain name that includes the dot. In addition, some</span></tt>
            </div>
            <div id="l172"
               class="code sev- "><tt><i>172</i> <span class="sd">        servers may not expect to receive the trailing dot when provided.</span></tt>
            </div>
            <div id="l173"
               class="code sev- "><tt><i>173</i> &nbsp;</tt>
            </div>
            <div id="l174"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>174</i> <span class="sd">        However, the hostname with trailing dot is critical to DNS resolution; doing a</span></tt>
            </div>
            <div id="l175"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>175</i> <span class="sd">        lookup with the trailing dot will properly only resolve the appropriate FQDN,</span></tt>
            </div>
            <div id="l176"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>176</i> <span class="sd">        whereas a lookup without a trailing dot will search the system&#39;s search domain</span></tt>
            </div>
            <div id="l177"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (83 > 79 characters)</li>
               
               </ul><tt><i>177</i> <span class="sd">        list. Thus, it&#39;s important to keep the original host around for use only in</span></tt>
            </div>
            <div id="l178"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (88 > 79 characters)</li>
               
               </ul><tt><i>178</i> <span class="sd">        those cases where it&#39;s appropriate (i.e., when doing DNS lookup to establish the</span></tt>
            </div>
            <div id="l179"
               class="code sev- "><tt><i>179</i> <span class="sd">        actual TCP connection across which we&#39;re going to send HTTP requests).</span></tt>
            </div>
            <div id="l180"
               class="code sev- "><tt><i>180</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l181"
               class="code sev- "><tt><i>181</i>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dns_host</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l182"
               class="code sev- "><tt><i>182</i> &nbsp;</tt>
            </div>
            <div id="l183"
               class="code sev- "><tt><i>183</i>     <span class="nd">@host</span><span class="o">.</span><span class="n">setter</span></tt>
            </div>
            <div id="l184"
               class="code sev- "><tt><i>184</i>     <span class="k">def</span> <span class="nf">host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l185"
               class="code sev- "><tt><i>185</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l186"
               class="code sev- "><tt><i>186</i> <span class="sd">        Setter for the `host` property.</span></tt>
            </div>
            <div id="l187"
               class="code sev- "><tt><i>187</i> &nbsp;</tt>
            </div>
            <div id="l188"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>188</i> <span class="sd">        We assume that only urllib3 uses the _dns_host attribute; httplib itself</span></tt>
            </div>
            <div id="l189"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (83 > 79 characters)</li>
               
               </ul><tt><i>189</i> <span class="sd">        only uses `host`, and it seems reasonable that other libraries follow suit.</span></tt>
            </div>
            <div id="l190"
               class="code sev- "><tt><i>190</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l191"
               class="code sev- "><tt><i>191</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_dns_host</span> <span class="o">=</span> <span class="n">value</span></tt>
            </div>
            <div id="l192"
               class="code sev- "><tt><i>192</i> &nbsp;</tt>
            </div>
            <div id="l193"
               class="code sev- "><tt><i>193</i>     <span class="k">def</span> <span class="nf">_new_conn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">:</span></tt>
            </div>
            <div id="l194"
               class="code sev- "><tt><i>194</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;Establish a socket connection and set nodelay settings on it.</span></tt>
            </div>
            <div id="l195"
               class="code sev- "><tt><i>195</i> &nbsp;</tt>
            </div>
            <div id="l196"
               class="code sev- "><tt><i>196</i> <span class="sd">        :return: New socket connection.</span></tt>
            </div>
            <div id="l197"
               class="code sev- "><tt><i>197</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l198"
               class="code sev- "><tt><i>198</i>         <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l199"
               class="code sev- "><tt><i>199</i>             <span class="n">sock</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">create_connection</span><span class="p">(</span></tt>
            </div>
            <div id="l200"
               class="code sev- "><tt><i>200</i>                 <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dns_host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">),</span></tt>
            </div>
            <div id="l201"
               class="code sev- "><tt><i>201</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span></tt>
            </div>
            <div id="l202"
               class="code sev- "><tt><i>202</i>                 <span class="n">source_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">source_address</span><span class="p">,</span></tt>
            </div>
            <div id="l203"
               class="code sev- "><tt><i>203</i>                 <span class="n">socket_options</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">socket_options</span><span class="p">,</span></tt>
            </div>
            <div id="l204"
               class="code sev- "><tt><i>204</i>             <span class="p">)</span></tt>
            </div>
            <div id="l205"
               class="code sev- "><tt><i>205</i>         <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">gaierror</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></tt>
            </div>
            <div id="l206"
               class="code sev- "><tt><i>206</i>             <span class="k">raise</span> <span class="n">NameResolutionError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></tt>
            </div>
            <div id="l207"
               class="code sev- "><tt><i>207</i>         <span class="k">except</span> <span class="n">SocketTimeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></tt>
            </div>
            <div id="l208"
               class="code sev- "><tt><i>208</i>             <span class="k">raise</span> <span class="n">ConnectTimeoutError</span><span class="p">(</span></tt>
            </div>
            <div id="l209"
               class="code sev- "><tt><i>209</i>                 <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l210"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (89 > 79 characters)</li>
               
               </ul><tt><i>210</i>                 <span class="sa">f</span><span class="s2">&quot;Connection to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2"> timed out. (connect timeout=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l211"
               class="code sev- "><tt><i>211</i>             <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></tt>
            </div>
            <div id="l212"
               class="code sev- "><tt><i>212</i> &nbsp;</tt>
            </div>
            <div id="l213"
               class="code sev- "><tt><i>213</i>         <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></tt>
            </div>
            <div id="l214"
               class="code sev- "><tt><i>214</i>             <span class="k">raise</span> <span class="n">NewConnectionError</span><span class="p">(</span></tt>
            </div>
            <div id="l215"
               class="code sev- "><tt><i>215</i>                 <span class="bp">self</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to establish a new connection: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span></tt>
            </div>
            <div id="l216"
               class="code sev- "><tt><i>216</i>             <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span></tt>
            </div>
            <div id="l217"
               class="code sev- "><tt><i>217</i> &nbsp;</tt>
            </div>
            <div id="l218"
               class="code sev- "><tt><i>218</i>         <span class="c1"># Audit hooks are only available in Python 3.8+</span></tt>
            </div>
            <div id="l219"
               class="code sev- "><tt><i>219</i>         <span class="k">if</span> <span class="n">_HAS_SYS_AUDIT</span><span class="p">:</span></tt>
            </div>
            <div id="l220"
               class="code sev- "><tt><i>220</i>             <span class="n">sys</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span><span class="s2">&quot;http.client.connect&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span><span class="p">)</span></tt>
            </div>
            <div id="l221"
               class="code sev- "><tt><i>221</i> &nbsp;</tt>
            </div>
            <div id="l222"
               class="code sev- "><tt><i>222</i>         <span class="k">return</span> <span class="n">sock</span></tt>
            </div>
            <div id="l223"
               class="code sev- "><tt><i>223</i> &nbsp;</tt>
            </div>
            <div id="l224"
               class="code sev- "><tt><i>224</i>     <span class="k">def</span> <span class="nf">set_tunnel</span><span class="p">(</span></tt>
            </div>
            <div id="l225"
               class="code sev- "><tt><i>225</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l226"
               class="code sev- "><tt><i>226</i>         <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l227"
               class="code sev- "><tt><i>227</i>         <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l228"
               class="code sev- "><tt><i>228</i>         <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l229"
               class="code sev- "><tt><i>229</i>         <span class="n">scheme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l230"
               class="code sev- "><tt><i>230</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l231"
               class="code sev- "><tt><i>231</i>         <span class="k">if</span> <span class="n">scheme</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">,</span> <span class="s2">&quot;https&quot;</span><span class="p">):</span></tt>
            </div>
            <div id="l232"
               class="code sev- "><tt><i>232</i>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span></tt>
            </div>
            <div id="l233"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (99 > 79 characters)</li>
               
               </ul><tt><i>233</i>                 <span class="sa">f</span><span class="s2">&quot;Invalid proxy scheme for tunneling: </span><span class="si">{</span><span class="n">scheme</span><span class="si">!r}</span><span class="s2">, must be either &#39;http&#39; or &#39;https&#39;&quot;</span></tt>
            </div>
            <div id="l234"
               class="code sev- "><tt><i>234</i>             <span class="p">)</span></tt>
            </div>
            <div id="l235"
               class="code sev- "><tt><i>235</i>         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_tunnel</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span></tt>
            </div>
            <div id="l236"
               class="code sev- "><tt><i>236</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_scheme</span> <span class="o">=</span> <span class="n">scheme</span></tt>
            </div>
            <div id="l237"
               class="code sev- "><tt><i>237</i> &nbsp;</tt>
            </div>
            <div id="l238"
               class="code sev- "><tt><i>238</i>     <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span></tt>
            </div>
            <div id="l239"
               class="code sev- "><tt><i>239</i> &nbsp;</tt>
            </div>
            <div id="l240"
               class="code sev- "><tt><i>240</i>         <span class="k">def</span> <span class="nf">_tunnel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l241"
               class="code sev- "><tt><i>241</i>             <span class="n">_MAXLINE</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">_MAXLINE</span>  <span class="c1"># type: ignore[attr-defined]</span></tt>
            </div>
            <div id="l242"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (83 > 79 characters)</li>
               
               </ul><tt><i>242</i>             <span class="n">connect</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;CONNECT </span><span class="si">%s</span><span class="s2">:</span><span class="si">%d</span><span class="s2"> HTTP/1.0</span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>  <span class="c1"># type: ignore[str-format]</span></tt>
            </div>
            <div id="l243"
               class="code sev- "><tt><i>243</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">),</span>  <span class="c1"># type: ignore[union-attr]</span></tt>
            </div>
            <div id="l244"
               class="code sev- "><tt><i>244</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_port</span><span class="p">,</span></tt>
            </div>
            <div id="l245"
               class="code sev- "><tt><i>245</i>             <span class="p">)</span></tt>
            </div>
            <div id="l246"
               class="code sev- "><tt><i>246</i>             <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="n">connect</span><span class="p">]</span></tt>
            </div>
            <div id="l247"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (92 > 79 characters)</li>
               
               </ul><tt><i>247</i>             <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_headers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># type: ignore[attr-defined]</span></tt>
            </div>
            <div id="l248"
               class="code sev- "><tt><i>248</i>                 <span class="n">headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">header</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;latin-1&quot;</span><span class="p">))</span></tt>
            </div>
            <div id="l249"
               class="code sev- "><tt><i>249</i>             <span class="n">headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l250"
               class="code sev- "><tt><i>250</i>             <span class="c1"># Making a single send() call instead of one per line encourages</span></tt>
            </div>
            <div id="l251"
               class="code sev- "><tt><i>251</i>             <span class="c1"># the host OS to use a more optimal packet size instead of</span></tt>
            </div>
            <div id="l252"
               class="code sev- "><tt><i>252</i>             <span class="c1"># potentially emitting a series of small packets.</span></tt>
            </div>
            <div id="l253"
               class="code sev- "><tt><i>253</i>             <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">headers</span><span class="p">))</span></tt>
            </div>
            <div id="l254"
               class="code sev- "><tt><i>254</i>             <span class="k">del</span> <span class="n">headers</span></tt>
            </div>
            <div id="l255"
               class="code sev- "><tt><i>255</i> &nbsp;</tt>
            </div>
            <div id="l256"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (104 > 79 characters)</li>
               
               </ul><tt><i>256</i>             <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_class</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_method</span><span class="p">)</span>  <span class="c1"># type: ignore[attr-defined]</span></tt>
            </div>
            <div id="l257"
               class="code sev- "><tt><i>257</i>             <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l258"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (96 > 79 characters)</li>
               
               </ul><tt><i>258</i>                 <span class="p">(</span><span class="n">version</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">_read_status</span><span class="p">()</span>  <span class="c1"># type: ignore[attr-defined]</span></tt>
            </div>
            <div id="l259"
               class="code sev- "><tt><i>259</i> &nbsp;</tt>
            </div>
            <div id="l260"
               class="code sev- "><tt><i>260</i>                 <span class="k">if</span> <span class="n">code</span> <span class="o">!=</span> <span class="n">http</span><span class="o">.</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">OK</span><span class="p">:</span></tt>
            </div>
            <div id="l261"
               class="code sev- "><tt><i>261</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></tt>
            </div>
            <div id="l262"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (88 > 79 characters)</li>
               
               </ul><tt><i>262</i>                     <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tunnel connection failed: </span><span class="si">{</span><span class="n">code</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l263"
               class="code sev- "><tt><i>263</i>                 <span class="k">while</span> <span class="kc">True</span><span class="p">:</span></tt>
            </div>
            <div id="l264"
               class="code sev- "><tt><i>264</i>                     <span class="n">line</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">readline</span><span class="p">(</span><span class="n">_MAXLINE</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span></tt>
            </div>
            <div id="l265"
               class="code sev- "><tt><i>265</i>                     <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_MAXLINE</span><span class="p">:</span></tt>
            </div>
            <div id="l266"
               class="code sev- "><tt><i>266</i>                         <span class="k">raise</span> <span class="n">http</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">LineTooLong</span><span class="p">(</span><span class="s2">&quot;header line&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l267"
               class="code sev- "><tt><i>267</i>                     <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span></tt>
            </div>
            <div id="l268"
               class="code sev- "><tt><i>268</i>                         <span class="c1"># for sites which EOF without sending a trailer</span></tt>
            </div>
            <div id="l269"
               class="code sev- "><tt><i>269</i>                         <span class="k">break</span></tt>
            </div>
            <div id="l270"
               class="code sev- "><tt><i>270</i>                     <span class="k">if</span> <span class="n">line</span> <span class="ow">in</span> <span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">):</span></tt>
            </div>
            <div id="l271"
               class="code sev- "><tt><i>271</i>                         <span class="k">break</span></tt>
            </div>
            <div id="l272"
               class="code sev- "><tt><i>272</i> &nbsp;</tt>
            </div>
            <div id="l273"
               class="code sev- "><tt><i>273</i>                     <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debuglevel</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span></tt>
            </div>
            <div id="l274"
               class="code sev- "><tt><i>274</i>                         <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;header:&quot;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></tt>
            </div>
            <div id="l275"
               class="code sev- "><tt><i>275</i>             <span class="k">finally</span><span class="p">:</span></tt>
            </div>
            <div id="l276"
               class="code sev- "><tt><i>276</i>                 <span class="n">response</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></tt>
            </div>
            <div id="l277"
               class="code sev- "><tt><i>277</i> &nbsp;</tt>
            </div>
            <div id="l278"
               class="code sev- "><tt><i>278</i>     <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l279"
               class="code sev- "><tt><i>279</i>         <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_conn</span><span class="p">()</span></tt>
            </div>
            <div id="l280"
               class="code sev- "><tt><i>280</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span><span class="p">:</span></tt>
            </div>
            <div id="l281"
               class="code sev- "><tt><i>281</i>             <span class="c1"># If we&#39;re tunneling it means we&#39;re connected to our proxy.</span></tt>
            </div>
            <div id="l282"
               class="code sev- "><tt><i>282</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l283"
               class="code sev- "><tt><i>283</i> &nbsp;</tt>
            </div>
            <div id="l284"
               class="code sev- "><tt><i>284</i>             <span class="c1"># TODO: Fix tunnel so it doesn&#39;t depend on self.sock state.</span></tt>
            </div>
            <div id="l285"
               class="code sev- "><tt><i>285</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel</span><span class="p">()</span></tt>
            </div>
            <div id="l286"
               class="code sev- "><tt><i>286</i> &nbsp;</tt>
            </div>
            <div id="l287"
               class="code sev- "><tt><i>287</i>         <span class="c1"># If there&#39;s a proxy to be connected to we are fully connected.</span></tt>
            </div>
            <div id="l288"
               class="code sev- "><tt><i>288</i>         <span class="c1"># This is set twice (once above and here) due to forwarding proxies</span></tt>
            </div>
            <div id="l289"
               class="code sev- "><tt><i>289</i>         <span class="c1"># not using tunnelling.</span></tt>
            </div>
            <div id="l290"
               class="code sev- "><tt><i>290</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="p">)</span></tt>
            </div>
            <div id="l291"
               class="code sev- "><tt><i>291</i> &nbsp;</tt>
            </div>
            <div id="l292"
               class="code sev- "><tt><i>292</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span><span class="p">:</span></tt>
            </div>
            <div id="l293"
               class="code sev- "><tt><i>293</i>             <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l294"
               class="code sev- "><tt><i>294</i> &nbsp;</tt>
            </div>
            <div id="l295"
               class="code sev- "><tt><i>295</i>     <span class="nd">@property</span></tt>
            </div>
            <div id="l296"
               class="code sev- "><tt><i>296</i>     <span class="k">def</span> <span class="nf">is_closed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span></tt>
            </div>
            <div id="l297"
               class="code sev- "><tt><i>297</i>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="ow">is</span> <span class="kc">None</span></tt>
            </div>
            <div id="l298"
               class="code sev- "><tt><i>298</i> &nbsp;</tt>
            </div>
            <div id="l299"
               class="code sev- "><tt><i>299</i>     <span class="nd">@property</span></tt>
            </div>
            <div id="l300"
               class="code sev- "><tt><i>300</i>     <span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span></tt>
            </div>
            <div id="l301"
               class="code sev- "><tt><i>301</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l302"
               class="code sev- "><tt><i>302</i>             <span class="k">return</span> <span class="kc">False</span></tt>
            </div>
            <div id="l303"
               class="code sev- "><tt><i>303</i>         <span class="k">return</span> <span class="ow">not</span> <span class="n">wait_for_read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span></tt>
            </div>
            <div id="l304"
               class="code sev- "><tt><i>304</i> &nbsp;</tt>
            </div>
            <div id="l305"
               class="code sev- "><tt><i>305</i>     <span class="nd">@property</span></tt>
            </div>
            <div id="l306"
               class="code sev- "><tt><i>306</i>     <span class="k">def</span> <span class="nf">has_connected_to_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span></tt>
            </div>
            <div id="l307"
               class="code sev- "><tt><i>307</i>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span></tt>
            </div>
            <div id="l308"
               class="code sev- "><tt><i>308</i> &nbsp;</tt>
            </div>
            <div id="l309"
               class="code sev- "><tt><i>309</i>     <span class="nd">@property</span></tt>
            </div>
            <div id="l310"
               class="code sev- "><tt><i>310</i>     <span class="k">def</span> <span class="nf">proxy_is_forwarding</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span></tt>
            </div>
            <div id="l311"
               class="code sev- "><tt><i>311</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l312"
               class="code sev- "><tt><i>312</i> <span class="sd">        Return True if a forwarding proxy is configured, else return False</span></tt>
            </div>
            <div id="l313"
               class="code sev- "><tt><i>313</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l314"
               class="code sev- "><tt><i>314</i>         <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span> <span class="ow">is</span> <span class="kc">None</span></tt>
            </div>
            <div id="l315"
               class="code sev- "><tt><i>315</i> &nbsp;</tt>
            </div>
            <div id="l316"
               class="code sev- "><tt><i>316</i>     <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l317"
               class="code sev- "><tt><i>317</i>         <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l318"
               class="code sev- "><tt><i>318</i>             <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></tt>
            </div>
            <div id="l319"
               class="code sev- "><tt><i>319</i>         <span class="k">finally</span><span class="p">:</span></tt>
            </div>
            <div id="l320"
               class="code sev- "><tt><i>320</i>             <span class="c1"># Reset all stateful properties so connection</span></tt>
            </div>
            <div id="l321"
               class="code sev- "><tt><i>321</i>             <span class="c1"># can be re-used without leaking prior configs.</span></tt>
            </div>
            <div id="l322"
               class="code sev- "><tt><i>322</i>             <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l323"
               class="code sev- "><tt><i>323</i>             <span class="bp">self</span><span class="o">.</span><span class="n">is_verified</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l324"
               class="code sev- "><tt><i>324</i>             <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l325"
               class="code sev- "><tt><i>325</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l326"
               class="code sev- "><tt><i>326</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l327"
               class="code sev- "><tt><i>327</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l328"
               class="code sev- "><tt><i>328</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_port</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l329"
               class="code sev- "><tt><i>329</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_scheme</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l330"
               class="code sev- "><tt><i>330</i> &nbsp;</tt>
            </div>
            <div id="l331"
               class="code sev- "><tt><i>331</i>     <span class="k">def</span> <span class="nf">putrequest</span><span class="p">(</span></tt>
            </div>
            <div id="l332"
               class="code sev- "><tt><i>332</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l333"
               class="code sev- "><tt><i>333</i>         <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l334"
               class="code sev- "><tt><i>334</i>         <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l335"
               class="code sev- "><tt><i>335</i>         <span class="n">skip_host</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l336"
               class="code sev- "><tt><i>336</i>         <span class="n">skip_accept_encoding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l337"
               class="code sev- "><tt><i>337</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l338"
               class="code sev- "><tt><i>338</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l339"
               class="code sev- "><tt><i>339</i>         <span class="c1"># Empty docstring because the indentation of CPython&#39;s implementation</span></tt>
            </div>
            <div id="l340"
               class="code sev- "><tt><i>340</i>         <span class="c1"># is broken but we don&#39;t want this method in our documentation.</span></tt>
            </div>
            <div id="l341"
               class="code sev- "><tt><i>341</i>         <span class="n">match</span> <span class="o">=</span> <span class="n">_CONTAINS_CONTROL_CHAR_RE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">method</span><span class="p">)</span></tt>
            </div>
            <div id="l342"
               class="code sev- "><tt><i>342</i>         <span class="k">if</span> <span class="n">match</span><span class="p">:</span></tt>
            </div>
            <div id="l343"
               class="code sev- "><tt><i>343</i>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span></tt>
            </div>
            <div id="l344"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (107 > 79 characters)</li>
               
               </ul><tt><i>344</i>                 <span class="sa">f</span><span class="s2">&quot;Method cannot contain non-token characters </span><span class="si">{</span><span class="n">method</span><span class="si">!r}</span><span class="s2"> (found at least </span><span class="si">{</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="si">!r}</span><span class="s2">)&quot;</span></tt>
            </div>
            <div id="l345"
               class="code sev- "><tt><i>345</i>             <span class="p">)</span></tt>
            </div>
            <div id="l346"
               class="code sev- "><tt><i>346</i> &nbsp;</tt>
            </div>
            <div id="l347"
               class="code sev- "><tt><i>347</i>         <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">putrequest</span><span class="p">(</span></tt>
            </div>
            <div id="l348"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (87 > 79 characters)</li>
               
               </ul><tt><i>348</i>             <span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">skip_host</span><span class="o">=</span><span class="n">skip_host</span><span class="p">,</span> <span class="n">skip_accept_encoding</span><span class="o">=</span><span class="n">skip_accept_encoding</span></tt>
            </div>
            <div id="l349"
               class="code sev- "><tt><i>349</i>         <span class="p">)</span></tt>
            </div>
            <div id="l350"
               class="code sev- "><tt><i>350</i> &nbsp;</tt>
            </div>
            <div id="l351"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>351</i>     <span class="k">def</span> <span class="nf">putheader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># type: ignore[override]</span></tt>
            </div>
            <div id="l352"
               class="code sev- "><tt><i>352</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l353"
               class="code sev- "><tt><i>353</i>         <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">==</span> <span class="n">SKIP_HEADER</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">):</span></tt>
            </div>
            <div id="l354"
               class="code sev- "><tt><i>354</i>             <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">)</span></tt>
            </div>
            <div id="l355"
               class="code sev- "><tt><i>355</i>         <span class="k">elif</span> <span class="n">to_str</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SKIPPABLE_HEADERS</span><span class="p">:</span></tt>
            </div>
            <div id="l356"
               class="code sev- "><tt><i>356</i>             <span class="n">skippable_headers</span> <span class="o">=</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span></tt>
            </div>
            <div id="l357"
               class="code sev- "><tt><i>357</i>                 <span class="p">[</span><span class="nb">str</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">SKIPPABLE_HEADERS</span><span class="p">)]</span></tt>
            </div>
            <div id="l358"
               class="code sev- "><tt><i>358</i>             <span class="p">)</span></tt>
            </div>
            <div id="l359"
               class="code sev- "><tt><i>359</i>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span></tt>
            </div>
            <div id="l360"
               class="code sev- "><tt><i>360</i>                 <span class="sa">f</span><span class="s2">&quot;urllib3.util.SKIP_HEADER only supports &#39;</span><span class="si">{</span><span class="n">skippable_headers</span><span class="si">}</span><span class="s2">&#39;&quot;</span></tt>
            </div>
            <div id="l361"
               class="code sev- "><tt><i>361</i>             <span class="p">)</span></tt>
            </div>
            <div id="l362"
               class="code sev- "><tt><i>362</i> &nbsp;</tt>
            </div>
            <div id="l363"
               class="code sev- "><tt><i>363</i>     <span class="c1"># `request` method&#39;s signature intentionally violates LSP.</span></tt>
            </div>
            <div id="l364"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (106 > 79 characters)</li>
               
               </ul><tt><i>364</i>     <span class="c1"># urllib3&#39;s API is different from `http.client.HTTPConnection` and the subclassing is only incidental.</span></tt>
            </div>
            <div id="l365"
               class="code sev- "><tt><i>365</i>     <span class="k">def</span> <span class="nf">request</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span></tt>
            </div>
            <div id="l366"
               class="code sev- "><tt><i>366</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l367"
               class="code sev- "><tt><i>367</i>         <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l368"
               class="code sev- "><tt><i>368</i>         <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l369"
               class="code sev- "><tt><i>369</i>         <span class="n">body</span><span class="p">:</span> <span class="n">_TYPE_BODY</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l370"
               class="code sev- "><tt><i>370</i>         <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l371"
               class="code sev- "><tt><i>371</i>         <span class="o">*</span><span class="p">,</span></tt>
            </div>
            <div id="l372"
               class="code sev- "><tt><i>372</i>         <span class="n">chunked</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l373"
               class="code sev- "><tt><i>373</i>         <span class="n">preload_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></tt>
            </div>
            <div id="l374"
               class="code sev- "><tt><i>374</i>         <span class="n">decode_content</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></tt>
            </div>
            <div id="l375"
               class="code sev- "><tt><i>375</i>         <span class="n">enforce_content_length</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span></tt>
            </div>
            <div id="l376"
               class="code sev- "><tt><i>376</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l377"
               class="code sev- "><tt><i>377</i>         <span class="c1"># Update the inner socket&#39;s timeout value to send the request.</span></tt>
            </div>
            <div id="l378"
               class="code sev- "><tt><i>378</i>         <span class="c1"># This only triggers if the connection is re-used.</span></tt>
            </div>
            <div id="l379"
               class="code sev- "><tt><i>379</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l380"
               class="code sev- "><tt><i>380</i>             <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span></tt>
            </div>
            <div id="l381"
               class="code sev- "><tt><i>381</i> &nbsp;</tt>
            </div>
            <div id="l382"
               class="code sev- "><tt><i>382</i>         <span class="c1"># Store these values to be fed into the HTTPResponse</span></tt>
            </div>
            <div id="l383"
               class="code sev- "><tt><i>383</i>         <span class="c1"># object later. TODO: Remove this in favor of a real</span></tt>
            </div>
            <div id="l384"
               class="code sev- "><tt><i>384</i>         <span class="c1"># HTTP lifecycle mechanism.</span></tt>
            </div>
            <div id="l385"
               class="code sev- "><tt><i>385</i> &nbsp;</tt>
            </div>
            <div id="l386"
               class="code sev- "><tt><i>386</i>         <span class="c1"># We have to store these before we call .request()</span></tt>
            </div>
            <div id="l387"
               class="code sev- "><tt><i>387</i>         <span class="c1"># because sometimes we can still salvage a response</span></tt>
            </div>
            <div id="l388"
               class="code sev- "><tt><i>388</i>         <span class="c1"># off the wire even if we aren&#39;t able to completely</span></tt>
            </div>
            <div id="l389"
               class="code sev- "><tt><i>389</i>         <span class="c1"># send the request body.</span></tt>
            </div>
            <div id="l390"
               class="code sev- "><tt><i>390</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span> <span class="o">=</span> <span class="n">_ResponseOptions</span><span class="p">(</span></tt>
            </div>
            <div id="l391"
               class="code sev- "><tt><i>391</i>             <span class="n">request_method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span></tt>
            </div>
            <div id="l392"
               class="code sev- "><tt><i>392</i>             <span class="n">request_url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span></tt>
            </div>
            <div id="l393"
               class="code sev- "><tt><i>393</i>             <span class="n">preload_content</span><span class="o">=</span><span class="n">preload_content</span><span class="p">,</span></tt>
            </div>
            <div id="l394"
               class="code sev- "><tt><i>394</i>             <span class="n">decode_content</span><span class="o">=</span><span class="n">decode_content</span><span class="p">,</span></tt>
            </div>
            <div id="l395"
               class="code sev- "><tt><i>395</i>             <span class="n">enforce_content_length</span><span class="o">=</span><span class="n">enforce_content_length</span><span class="p">,</span></tt>
            </div>
            <div id="l396"
               class="code sev- "><tt><i>396</i>         <span class="p">)</span></tt>
            </div>
            <div id="l397"
               class="code sev- "><tt><i>397</i> &nbsp;</tt>
            </div>
            <div id="l398"
               class="code sev- "><tt><i>398</i>         <span class="k">if</span> <span class="n">headers</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l399"
               class="code sev- "><tt><i>399</i>             <span class="n">headers</span> <span class="o">=</span> <span class="p">{}</span></tt>
            </div>
            <div id="l400"
               class="code sev- "><tt><i>400</i>         <span class="n">header_keys</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">to_str</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">)</span></tt>
            </div>
            <div id="l401"
               class="code sev- "><tt><i>401</i>         <span class="n">skip_accept_encoding</span> <span class="o">=</span> <span class="s2">&quot;accept-encoding&quot;</span> <span class="ow">in</span> <span class="n">header_keys</span></tt>
            </div>
            <div id="l402"
               class="code sev- "><tt><i>402</i>         <span class="n">skip_host</span> <span class="o">=</span> <span class="s2">&quot;host&quot;</span> <span class="ow">in</span> <span class="n">header_keys</span></tt>
            </div>
            <div id="l403"
               class="code sev- "><tt><i>403</i>         <span class="bp">self</span><span class="o">.</span><span class="n">putrequest</span><span class="p">(</span></tt>
            </div>
            <div id="l404"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (87 > 79 characters)</li>
               
               </ul><tt><i>404</i>             <span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">skip_accept_encoding</span><span class="o">=</span><span class="n">skip_accept_encoding</span><span class="p">,</span> <span class="n">skip_host</span><span class="o">=</span><span class="n">skip_host</span></tt>
            </div>
            <div id="l405"
               class="code sev- "><tt><i>405</i>         <span class="p">)</span></tt>
            </div>
            <div id="l406"
               class="code sev- "><tt><i>406</i> &nbsp;</tt>
            </div>
            <div id="l407"
               class="code sev- "><tt><i>407</i>         <span class="c1"># Transform the body into an iterable of sendall()-able chunks</span></tt>
            </div>
            <div id="l408"
               class="code sev- "><tt><i>408</i>         <span class="c1"># and detect if an explicit Content-Length is doable.</span></tt>
            </div>
            <div id="l409"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>409</i>         <span class="n">chunks_and_cl</span> <span class="o">=</span> <span class="n">body_to_chunks</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">blocksize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">blocksize</span><span class="p">)</span></tt>
            </div>
            <div id="l410"
               class="code sev- "><tt><i>410</i>         <span class="n">chunks</span> <span class="o">=</span> <span class="n">chunks_and_cl</span><span class="o">.</span><span class="n">chunks</span></tt>
            </div>
            <div id="l411"
               class="code sev- "><tt><i>411</i>         <span class="n">content_length</span> <span class="o">=</span> <span class="n">chunks_and_cl</span><span class="o">.</span><span class="n">content_length</span></tt>
            </div>
            <div id="l412"
               class="code sev- "><tt><i>412</i> &nbsp;</tt>
            </div>
            <div id="l413"
               class="code sev- "><tt><i>413</i>         <span class="c1"># When chunked is explicit set to &#39;True&#39; we respect that.</span></tt>
            </div>
            <div id="l414"
               class="code sev- "><tt><i>414</i>         <span class="k">if</span> <span class="n">chunked</span><span class="p">:</span></tt>
            </div>
            <div id="l415"
               class="code sev- "><tt><i>415</i>             <span class="k">if</span> <span class="s2">&quot;transfer-encoding&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">header_keys</span><span class="p">:</span></tt>
            </div>
            <div id="l416"
               class="code sev- "><tt><i>416</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="s2">&quot;Transfer-Encoding&quot;</span><span class="p">,</span> <span class="s2">&quot;chunked&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l417"
               class="code sev- "><tt><i>417</i>         <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l418"
               class="code sev- "><tt><i>418</i>             <span class="c1"># Detect whether a framing mechanism is already in use. If so</span></tt>
            </div>
            <div id="l419"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>419</i>             <span class="c1"># we respect that value, otherwise we pick chunked vs content-length</span></tt>
            </div>
            <div id="l420"
               class="code sev- "><tt><i>420</i>             <span class="c1"># depending on the type of &#39;body&#39;.</span></tt>
            </div>
            <div id="l421"
               class="code sev- "><tt><i>421</i>             <span class="k">if</span> <span class="s2">&quot;content-length&quot;</span> <span class="ow">in</span> <span class="n">header_keys</span><span class="p">:</span></tt>
            </div>
            <div id="l422"
               class="code sev- "><tt><i>422</i>                 <span class="n">chunked</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l423"
               class="code sev- "><tt><i>423</i>             <span class="k">elif</span> <span class="s2">&quot;transfer-encoding&quot;</span> <span class="ow">in</span> <span class="n">header_keys</span><span class="p">:</span></tt>
            </div>
            <div id="l424"
               class="code sev- "><tt><i>424</i>                 <span class="n">chunked</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l425"
               class="code sev- "><tt><i>425</i> &nbsp;</tt>
            </div>
            <div id="l426"
               class="code sev- "><tt><i>426</i>             <span class="c1"># Otherwise we go off the recommendation of &#39;body_to_chunks()&#39;.</span></tt>
            </div>
            <div id="l427"
               class="code sev- "><tt><i>427</i>             <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l428"
               class="code sev- "><tt><i>428</i>                 <span class="n">chunked</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l429"
               class="code sev- "><tt><i>429</i>                 <span class="k">if</span> <span class="n">content_length</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l430"
               class="code sev- "><tt><i>430</i>                     <span class="k">if</span> <span class="n">chunks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l431"
               class="code sev- "><tt><i>431</i>                         <span class="n">chunked</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l432"
               class="code sev- "><tt><i>432</i>                         <span class="bp">self</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="s2">&quot;Transfer-Encoding&quot;</span><span class="p">,</span> <span class="s2">&quot;chunked&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l433"
               class="code sev- "><tt><i>433</i>                 <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l434"
               class="code sev- "><tt><i>434</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="s2">&quot;Content-Length&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">content_length</span><span class="p">))</span></tt>
            </div>
            <div id="l435"
               class="code sev- "><tt><i>435</i> &nbsp;</tt>
            </div>
            <div id="l436"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (84 > 79 characters)</li>
               
               </ul><tt><i>436</i>         <span class="c1"># Now that framing headers are out of the way we send all the other headers.</span></tt>
            </div>
            <div id="l437"
               class="code sev- "><tt><i>437</i>         <span class="k">if</span> <span class="s2">&quot;user-agent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">header_keys</span><span class="p">:</span></tt>
            </div>
            <div id="l438"
               class="code sev- "><tt><i>438</i>             <span class="bp">self</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">,</span> <span class="n">_get_default_user_agent</span><span class="p">())</span></tt>
            </div>
            <div id="l439"
               class="code sev- "><tt><i>439</i>         <span class="k">for</span> <span class="n">header</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span></tt>
            </div>
            <div id="l440"
               class="code sev- "><tt><i>440</i>             <span class="bp">self</span><span class="o">.</span><span class="n">putheader</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></tt>
            </div>
            <div id="l441"
               class="code sev- "><tt><i>441</i>         <span class="bp">self</span><span class="o">.</span><span class="n">endheaders</span><span class="p">()</span></tt>
            </div>
            <div id="l442"
               class="code sev- "><tt><i>442</i> &nbsp;</tt>
            </div>
            <div id="l443"
               class="code sev- "><tt><i>443</i>         <span class="c1"># If we&#39;re given a body we start sending that in chunks.</span></tt>
            </div>
            <div id="l444"
               class="code sev- "><tt><i>444</i>         <span class="k">if</span> <span class="n">chunks</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l445"
               class="code sev- "><tt><i>445</i>             <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span></tt>
            </div>
            <div id="l446"
               class="code sev- "><tt><i>446</i>                 <span class="c1"># Sending empty chunks isn&#39;t allowed for TE: chunked</span></tt>
            </div>
            <div id="l447"
               class="code sev- "><tt><i>447</i>                 <span class="c1"># as it indicates the end of the body.</span></tt>
            </div>
            <div id="l448"
               class="code sev- "><tt><i>448</i>                 <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span></tt>
            </div>
            <div id="l449"
               class="code sev- "><tt><i>449</i>                     <span class="k">continue</span></tt>
            </div>
            <div id="l450"
               class="code sev- "><tt><i>450</i>                 <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span></tt>
            </div>
            <div id="l451"
               class="code sev- "><tt><i>451</i>                     <span class="n">chunk</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l452"
               class="code sev- "><tt><i>452</i>                 <span class="k">if</span> <span class="n">chunked</span><span class="p">:</span></tt>
            </div>
            <div id="l453"
               class="code sev- "><tt><i>453</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="si">%x</span><span class="se">\r\n</span><span class="s2">%b</span><span class="se">\r\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">),</span> <span class="n">chunk</span><span class="p">))</span></tt>
            </div>
            <div id="l454"
               class="code sev- "><tt><i>454</i>                 <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l455"
               class="code sev- "><tt><i>455</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span></tt>
            </div>
            <div id="l456"
               class="code sev- "><tt><i>456</i> &nbsp;</tt>
            </div>
            <div id="l457"
               class="code sev- "><tt><i>457</i>         <span class="c1"># Regardless of whether we have a body or not, if we&#39;re in</span></tt>
            </div>
            <div id="l458"
               class="code sev- "><tt><i>458</i>         <span class="c1"># chunked mode we want to send an explicit empty chunk.</span></tt>
            </div>
            <div id="l459"
               class="code sev- "><tt><i>459</i>         <span class="k">if</span> <span class="n">chunked</span><span class="p">:</span></tt>
            </div>
            <div id="l460"
               class="code sev- "><tt><i>460</i>             <span class="bp">self</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;0</span><span class="se">\r\n\r\n</span><span class="s2">&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l461"
               class="code sev- "><tt><i>461</i> &nbsp;</tt>
            </div>
            <div id="l462"
               class="code sev- "><tt><i>462</i>     <span class="k">def</span> <span class="nf">request_chunked</span><span class="p">(</span></tt>
            </div>
            <div id="l463"
               class="code sev- "><tt><i>463</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l464"
               class="code sev- "><tt><i>464</i>         <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l465"
               class="code sev- "><tt><i>465</i>         <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l466"
               class="code sev- "><tt><i>466</i>         <span class="n">body</span><span class="p">:</span> <span class="n">_TYPE_BODY</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l467"
               class="code sev- "><tt><i>467</i>         <span class="n">headers</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l468"
               class="code sev- "><tt><i>468</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l469"
               class="code sev- "><tt><i>469</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l470"
               class="code sev- "><tt><i>470</i> <span class="sd">        Alternative to the common request method, which sends the</span></tt>
            </div>
            <div id="l471"
               class="code sev- "><tt><i>471</i> <span class="sd">        body with chunked encoding and not as one block</span></tt>
            </div>
            <div id="l472"
               class="code sev- "><tt><i>472</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l473"
               class="code sev- "><tt><i>473</i>         <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span></tt>
            </div>
            <div id="l474"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (81 > 79 characters)</li>
               
               </ul><tt><i>474</i>             <span class="s2">&quot;HTTPConnection.request_chunked() is deprecated and will be removed &quot;</span></tt>
            </div>
            <div id="l475"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (88 > 79 characters)</li>
               
               </ul><tt><i>475</i>             <span class="s2">&quot;in urllib3 v2.1.0. Instead use HTTPConnection.request(..., chunked=True).&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l476"
               class="code sev- "><tt><i>476</i>             <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">,</span></tt>
            </div>
            <div id="l477"
               class="code sev- "><tt><i>477</i>             <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span></tt>
            </div>
            <div id="l478"
               class="code sev- "><tt><i>478</i>         <span class="p">)</span></tt>
            </div>
            <div id="l479"
               class="code sev- "><tt><i>479</i>         <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">chunked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></tt>
            </div>
            <div id="l480"
               class="code sev- "><tt><i>480</i> &nbsp;</tt>
            </div>
            <div id="l481"
               class="code sev- "><tt><i>481</i>     <span class="k">def</span> <span class="nf">getresponse</span><span class="p">(</span>  <span class="c1"># type: ignore[override]</span></tt>
            </div>
            <div id="l482"
               class="code sev- "><tt><i>482</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l483"
               class="code sev- "><tt><i>483</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HTTPResponse</span><span class="p">:</span></tt>
            </div>
            <div id="l484"
               class="code sev- "><tt><i>484</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l485"
               class="code sev- "><tt><i>485</i> <span class="sd">        Get the response from the server.</span></tt>
            </div>
            <div id="l486"
               class="code sev- "><tt><i>486</i> &nbsp;</tt>
            </div>
            <div id="l487"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (156 > 79 characters)</li>
               
               </ul><tt><i>487</i> <span class="sd">        If the HTTPConnection is in the correct state, returns an instance of HTTPResponse or of whatever object is returned by the response_class variable.</span></tt>
            </div>
            <div id="l488"
               class="code sev- "><tt><i>488</i> &nbsp;</tt>
            </div>
            <div id="l489"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (301 > 79 characters)</li>
               
               </ul><tt><i>489</i> <span class="sd">        If a request has not been sent or if a previous response has not be handled, ResponseNotReady is raised. If the HTTP response indicates that the connection should be closed, then it will be closed before the response is returned. When the connection is closed, the underlying socket is closed.</span></tt>
            </div>
            <div id="l490"
               class="code sev- "><tt><i>490</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l491"
               class="code sev- "><tt><i>491</i>         <span class="c1"># Raise the same error as http.client.HTTPConnection</span></tt>
            </div>
            <div id="l492"
               class="code sev- "><tt><i>492</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l493"
               class="code sev- "><tt><i>493</i>             <span class="k">raise</span> <span class="n">ResponseNotReady</span><span class="p">()</span></tt>
            </div>
            <div id="l494"
               class="code sev- "><tt><i>494</i> &nbsp;</tt>
            </div>
            <div id="l495"
               class="code sev- "><tt><i>495</i>         <span class="c1"># Reset this attribute for being used again.</span></tt>
            </div>
            <div id="l496"
               class="code sev- "><tt><i>496</i>         <span class="n">resp_options</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span></tt>
            </div>
            <div id="l497"
               class="code sev- "><tt><i>497</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_response_options</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l498"
               class="code sev- "><tt><i>498</i> &nbsp;</tt>
            </div>
            <div id="l499"
               class="code sev- "><tt><i>499</i>         <span class="c1"># Since the connection&#39;s timeout value may have been updated</span></tt>
            </div>
            <div id="l500"
               class="code sev- "><tt><i>500</i>         <span class="c1"># we need to set the timeout on the socket.</span></tt>
            </div>
            <div id="l501"
               class="code sev- "><tt><i>501</i>         <span class="bp">self</span><span class="o">.</span><span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)</span></tt>
            </div>
            <div id="l502"
               class="code sev- "><tt><i>502</i> &nbsp;</tt>
            </div>
            <div id="l503"
               class="code sev- "><tt><i>503</i>         <span class="c1"># This is needed here to avoid circular import errors</span></tt>
            </div>
            <div id="l504"
               class="code sev- "><tt><i>504</i>         <span class="kn">from</span> <span class="nn">.response</span> <span class="kn">import</span> <span class="n">HTTPResponse</span></tt>
            </div>
            <div id="l505"
               class="code sev- "><tt><i>505</i> &nbsp;</tt>
            </div>
            <div id="l506"
               class="code sev- "><tt><i>506</i>         <span class="c1"># Get the response from http.client.HTTPConnection</span></tt>
            </div>
            <div id="l507"
               class="code sev- "><tt><i>507</i>         <span class="n">httplib_response</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">getresponse</span><span class="p">()</span></tt>
            </div>
            <div id="l508"
               class="code sev- "><tt><i>508</i> &nbsp;</tt>
            </div>
            <div id="l509"
               class="code sev- "><tt><i>509</i>         <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l510"
               class="code sev- "><tt><i>510</i>             <span class="n">assert_header_parsing</span><span class="p">(</span><span class="n">httplib_response</span><span class="o">.</span><span class="n">msg</span><span class="p">)</span></tt>
            </div>
            <div id="l511"
               class="code sev- "><tt><i>511</i>         <span class="k">except</span> <span class="p">(</span><span class="n">HeaderParsingError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">)</span> <span class="k">as</span> <span class="n">hpe</span><span class="p">:</span></tt>
            </div>
            <div id="l512"
               class="code sev- "><tt><i>512</i>             <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span></tt>
            </div>
            <div id="l513"
               class="code sev- "><tt><i>513</i>                 <span class="s2">&quot;Failed to parse headers (url=</span><span class="si">%s</span><span class="s2">): </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l514"
               class="code sev- "><tt><i>514</i>                 <span class="n">_url_from_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resp_options</span><span class="o">.</span><span class="n">request_url</span><span class="p">),</span></tt>
            </div>
            <div id="l515"
               class="code sev- "><tt><i>515</i>                 <span class="n">hpe</span><span class="p">,</span></tt>
            </div>
            <div id="l516"
               class="code sev- "><tt><i>516</i>                 <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span></tt>
            </div>
            <div id="l517"
               class="code sev- "><tt><i>517</i>             <span class="p">)</span></tt>
            </div>
            <div id="l518"
               class="code sev- "><tt><i>518</i> &nbsp;</tt>
            </div>
            <div id="l519"
               class="code sev- "><tt><i>519</i>         <span class="n">headers</span> <span class="o">=</span> <span class="n">HTTPHeaderDict</span><span class="p">(</span><span class="n">httplib_response</span><span class="o">.</span><span class="n">msg</span><span class="o">.</span><span class="n">items</span><span class="p">())</span></tt>
            </div>
            <div id="l520"
               class="code sev- "><tt><i>520</i> &nbsp;</tt>
            </div>
            <div id="l521"
               class="code sev- "><tt><i>521</i>         <span class="n">response</span> <span class="o">=</span> <span class="n">HTTPResponse</span><span class="p">(</span></tt>
            </div>
            <div id="l522"
               class="code sev- "><tt><i>522</i>             <span class="n">body</span><span class="o">=</span><span class="n">httplib_response</span><span class="p">,</span></tt>
            </div>
            <div id="l523"
               class="code sev- "><tt><i>523</i>             <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span></tt>
            </div>
            <div id="l524"
               class="code sev- "><tt><i>524</i>             <span class="n">status</span><span class="o">=</span><span class="n">httplib_response</span><span class="o">.</span><span class="n">status</span><span class="p">,</span></tt>
            </div>
            <div id="l525"
               class="code sev- "><tt><i>525</i>             <span class="n">version</span><span class="o">=</span><span class="n">httplib_response</span><span class="o">.</span><span class="n">version</span><span class="p">,</span></tt>
            </div>
            <div id="l526"
               class="code sev- "><tt><i>526</i>             <span class="n">version_string</span><span class="o">=</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_http_vsn_str&quot;</span><span class="p">,</span> <span class="s2">&quot;HTTP/?&quot;</span><span class="p">),</span></tt>
            </div>
            <div id="l527"
               class="code sev- "><tt><i>527</i>             <span class="n">reason</span><span class="o">=</span><span class="n">httplib_response</span><span class="o">.</span><span class="n">reason</span><span class="p">,</span></tt>
            </div>
            <div id="l528"
               class="code sev- "><tt><i>528</i>             <span class="n">preload_content</span><span class="o">=</span><span class="n">resp_options</span><span class="o">.</span><span class="n">preload_content</span><span class="p">,</span></tt>
            </div>
            <div id="l529"
               class="code sev- "><tt><i>529</i>             <span class="n">decode_content</span><span class="o">=</span><span class="n">resp_options</span><span class="o">.</span><span class="n">decode_content</span><span class="p">,</span></tt>
            </div>
            <div id="l530"
               class="code sev- "><tt><i>530</i>             <span class="n">original_response</span><span class="o">=</span><span class="n">httplib_response</span><span class="p">,</span></tt>
            </div>
            <div id="l531"
               class="code sev- "><tt><i>531</i>             <span class="n">enforce_content_length</span><span class="o">=</span><span class="n">resp_options</span><span class="o">.</span><span class="n">enforce_content_length</span><span class="p">,</span></tt>
            </div>
            <div id="l532"
               class="code sev- "><tt><i>532</i>             <span class="n">request_method</span><span class="o">=</span><span class="n">resp_options</span><span class="o">.</span><span class="n">request_method</span><span class="p">,</span></tt>
            </div>
            <div id="l533"
               class="code sev- "><tt><i>533</i>             <span class="n">request_url</span><span class="o">=</span><span class="n">resp_options</span><span class="o">.</span><span class="n">request_url</span><span class="p">,</span></tt>
            </div>
            <div id="l534"
               class="code sev- "><tt><i>534</i>         <span class="p">)</span></tt>
            </div>
            <div id="l535"
               class="code sev- "><tt><i>535</i>         <span class="k">return</span> <span class="n">response</span></tt>
            </div>
            <div id="l536"
               class="code sev- "><tt><i>536</i> &nbsp;</tt>
            </div>
            <div id="l537"
               class="code sev- "><tt><i>537</i> &nbsp;</tt>
            </div>
            <div id="l538"
               class="code sev- "><tt><i>538</i> <span class="k">class</span> <span class="nc">HTTPSConnection</span><span class="p">(</span><span class="n">HTTPConnection</span><span class="p">):</span></tt>
            </div>
            <div id="l539"
               class="code sev- "><tt><i>539</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l540"
               class="code sev- "><tt><i>540</i> <span class="sd">    Many of the parameters to this constructor are passed to the underlying SSL</span></tt>
            </div>
            <div id="l541"
               class="code sev- "><tt><i>541</i> <span class="sd">    socket by means of :py:func:`urllib3.util.ssl_wrap_socket`.</span></tt>
            </div>
            <div id="l542"
               class="code sev- "><tt><i>542</i> <span class="sd">    &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l543"
               class="code sev- "><tt><i>543</i> &nbsp;</tt>
            </div>
            <div id="l544"
               class="code sev- "><tt><i>544</i>     <span class="n">default_port</span> <span class="o">=</span> <span class="n">port_by_scheme</span><span class="p">[</span><span class="s2">&quot;https&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore[misc]</span></tt>
            </div>
            <div id="l545"
               class="code sev- "><tt><i>545</i> &nbsp;</tt>
            </div>
            <div id="l546"
               class="code sev- "><tt><i>546</i>     <span class="n">cert_reqs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l547"
               class="code sev- "><tt><i>547</i>     <span class="n">ca_certs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l548"
               class="code sev- "><tt><i>548</i>     <span class="n">ca_cert_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l549"
               class="code sev- "><tt><i>549</i>     <span class="n">ca_cert_data</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l550"
               class="code sev- "><tt><i>550</i>     <span class="n">ssl_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l551"
               class="code sev- "><tt><i>551</i>     <span class="n">ssl_minimum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l552"
               class="code sev- "><tt><i>552</i>     <span class="n">ssl_maximum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l553"
               class="code sev- "><tt><i>553</i>     <span class="n">assert_fingerprint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l554"
               class="code sev- "><tt><i>554</i>     <span class="n">_connect_callback</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l555"
               class="code sev- "><tt><i>555</i> &nbsp;</tt>
            </div>
            <div id="l556"
               class="code sev- "><tt><i>556</i>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span></tt>
            </div>
            <div id="l557"
               class="code sev- "><tt><i>557</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l558"
               class="code sev- "><tt><i>558</i>         <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l559"
               class="code sev- "><tt><i>559</i>         <span class="n">port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l560"
               class="code sev- "><tt><i>560</i>         <span class="o">*</span><span class="p">,</span></tt>
            </div>
            <div id="l561"
               class="code sev- "><tt><i>561</i>         <span class="n">timeout</span><span class="p">:</span> <span class="n">_TYPE_TIMEOUT</span> <span class="o">=</span> <span class="n">_DEFAULT_TIMEOUT</span><span class="p">,</span></tt>
            </div>
            <div id="l562"
               class="code sev- "><tt><i>562</i>         <span class="n">source_address</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l563"
               class="code sev- "><tt><i>563</i>         <span class="n">blocksize</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16384</span><span class="p">,</span></tt>
            </div>
            <div id="l564"
               class="code sev- "><tt><i>564</i>         <span class="n">socket_options</span><span class="p">:</span> <span class="kc">None</span></tt>
            </div>
            <div id="l565"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (84 > 79 characters)</li>
               
               </ul><tt><i>565</i>         <span class="o">|</span> <span class="p">(</span><span class="n">connection</span><span class="o">.</span><span class="n">_TYPE_SOCKET_OPTIONS</span><span class="p">)</span> <span class="o">=</span> <span class="n">HTTPConnection</span><span class="o">.</span><span class="n">default_socket_options</span><span class="p">,</span></tt>
            </div>
            <div id="l566"
               class="code sev- "><tt><i>566</i>         <span class="n">proxy</span><span class="p">:</span> <span class="n">Url</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l567"
               class="code sev- "><tt><i>567</i>         <span class="n">proxy_config</span><span class="p">:</span> <span class="n">ProxyConfig</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l568"
               class="code sev- "><tt><i>568</i>         <span class="n">cert_reqs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l569"
               class="code sev- "><tt><i>569</i>         <span class="n">assert_hostname</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l570"
               class="code sev- "><tt><i>570</i>         <span class="n">assert_fingerprint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l571"
               class="code sev- "><tt><i>571</i>         <span class="n">server_hostname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l572"
               class="code sev- "><tt><i>572</i>         <span class="n">ssl_context</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l573"
               class="code sev- "><tt><i>573</i>         <span class="n">ca_certs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l574"
               class="code sev- "><tt><i>574</i>         <span class="n">ca_cert_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l575"
               class="code sev- "><tt><i>575</i>         <span class="n">ca_cert_data</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l576"
               class="code sev- "><tt><i>576</i>         <span class="n">ssl_minimum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l577"
               class="code sev- "><tt><i>577</i>         <span class="n">ssl_maximum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l578"
               class="code sev- "><tt><i>578</i>         <span class="n">ssl_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># Deprecated</span></tt>
            </div>
            <div id="l579"
               class="code sev- "><tt><i>579</i>         <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l580"
               class="code sev- "><tt><i>580</i>         <span class="n">key_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l581"
               class="code sev- "><tt><i>581</i>         <span class="n">key_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l582"
               class="code sev- "><tt><i>582</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l583"
               class="code sev- "><tt><i>583</i>         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span></tt>
            </div>
            <div id="l584"
               class="code sev- "><tt><i>584</i>             <span class="n">host</span><span class="p">,</span></tt>
            </div>
            <div id="l585"
               class="code sev- "><tt><i>585</i>             <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span></tt>
            </div>
            <div id="l586"
               class="code sev- "><tt><i>586</i>             <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span></tt>
            </div>
            <div id="l587"
               class="code sev- "><tt><i>587</i>             <span class="n">source_address</span><span class="o">=</span><span class="n">source_address</span><span class="p">,</span></tt>
            </div>
            <div id="l588"
               class="code sev- "><tt><i>588</i>             <span class="n">blocksize</span><span class="o">=</span><span class="n">blocksize</span><span class="p">,</span></tt>
            </div>
            <div id="l589"
               class="code sev- "><tt><i>589</i>             <span class="n">socket_options</span><span class="o">=</span><span class="n">socket_options</span><span class="p">,</span></tt>
            </div>
            <div id="l590"
               class="code sev- "><tt><i>590</i>             <span class="n">proxy</span><span class="o">=</span><span class="n">proxy</span><span class="p">,</span></tt>
            </div>
            <div id="l591"
               class="code sev- "><tt><i>591</i>             <span class="n">proxy_config</span><span class="o">=</span><span class="n">proxy_config</span><span class="p">,</span></tt>
            </div>
            <div id="l592"
               class="code sev- "><tt><i>592</i>         <span class="p">)</span></tt>
            </div>
            <div id="l593"
               class="code sev- "><tt><i>593</i> &nbsp;</tt>
            </div>
            <div id="l594"
               class="code sev- "><tt><i>594</i>         <span class="bp">self</span><span class="o">.</span><span class="n">key_file</span> <span class="o">=</span> <span class="n">key_file</span></tt>
            </div>
            <div id="l595"
               class="code sev- "><tt><i>595</i>         <span class="bp">self</span><span class="o">.</span><span class="n">cert_file</span> <span class="o">=</span> <span class="n">cert_file</span></tt>
            </div>
            <div id="l596"
               class="code sev- "><tt><i>596</i>         <span class="bp">self</span><span class="o">.</span><span class="n">key_password</span> <span class="o">=</span> <span class="n">key_password</span></tt>
            </div>
            <div id="l597"
               class="code sev- "><tt><i>597</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl_context</span></tt>
            </div>
            <div id="l598"
               class="code sev- "><tt><i>598</i>         <span class="bp">self</span><span class="o">.</span><span class="n">server_hostname</span> <span class="o">=</span> <span class="n">server_hostname</span></tt>
            </div>
            <div id="l599"
               class="code sev- "><tt><i>599</i>         <span class="bp">self</span><span class="o">.</span><span class="n">assert_hostname</span> <span class="o">=</span> <span class="n">assert_hostname</span></tt>
            </div>
            <div id="l600"
               class="code sev- "><tt><i>600</i>         <span class="bp">self</span><span class="o">.</span><span class="n">assert_fingerprint</span> <span class="o">=</span> <span class="n">assert_fingerprint</span></tt>
            </div>
            <div id="l601"
               class="code sev- "><tt><i>601</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ssl_version</span> <span class="o">=</span> <span class="n">ssl_version</span></tt>
            </div>
            <div id="l602"
               class="code sev- "><tt><i>602</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ssl_minimum_version</span> <span class="o">=</span> <span class="n">ssl_minimum_version</span></tt>
            </div>
            <div id="l603"
               class="code sev- "><tt><i>603</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ssl_maximum_version</span> <span class="o">=</span> <span class="n">ssl_maximum_version</span></tt>
            </div>
            <div id="l604"
               class="code sev- "><tt><i>604</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span> <span class="o">=</span> <span class="n">ca_certs</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">ca_certs</span><span class="p">)</span></tt>
            </div>
            <div id="l605"
               class="code sev- "><tt><i>605</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_dir</span> <span class="o">=</span> <span class="n">ca_cert_dir</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">ca_cert_dir</span><span class="p">)</span></tt>
            </div>
            <div id="l606"
               class="code sev- "><tt><i>606</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_data</span> <span class="o">=</span> <span class="n">ca_cert_data</span></tt>
            </div>
            <div id="l607"
               class="code sev- "><tt><i>607</i> &nbsp;</tt>
            </div>
            <div id="l608"
               class="code sev- "><tt><i>608</i>         <span class="c1"># cert_reqs depends on ssl_context so calculate last.</span></tt>
            </div>
            <div id="l609"
               class="code sev- "><tt><i>609</i>         <span class="k">if</span> <span class="n">cert_reqs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l610"
               class="code sev- "><tt><i>610</i>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l611"
               class="code sev- "><tt><i>611</i>                 <span class="n">cert_reqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span><span class="o">.</span><span class="n">verify_mode</span></tt>
            </div>
            <div id="l612"
               class="code sev- "><tt><i>612</i>             <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l613"
               class="code sev- "><tt><i>613</i>                 <span class="n">cert_reqs</span> <span class="o">=</span> <span class="n">resolve_cert_reqs</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></tt>
            </div>
            <div id="l614"
               class="code sev- "><tt><i>614</i>         <span class="bp">self</span><span class="o">.</span><span class="n">cert_reqs</span> <span class="o">=</span> <span class="n">cert_reqs</span></tt>
            </div>
            <div id="l615"
               class="code sev- "><tt><i>615</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_connect_callback</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l616"
               class="code sev- "><tt><i>616</i> &nbsp;</tt>
            </div>
            <div id="l617"
               class="code sev- "><tt><i>617</i>     <span class="k">def</span> <span class="nf">set_cert</span><span class="p">(</span></tt>
            </div>
            <div id="l618"
               class="code sev- "><tt><i>618</i>         <span class="bp">self</span><span class="p">,</span></tt>
            </div>
            <div id="l619"
               class="code sev- "><tt><i>619</i>         <span class="n">key_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l620"
               class="code sev- "><tt><i>620</i>         <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l621"
               class="code sev- "><tt><i>621</i>         <span class="n">cert_reqs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l622"
               class="code sev- "><tt><i>622</i>         <span class="n">key_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l623"
               class="code sev- "><tt><i>623</i>         <span class="n">ca_certs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l624"
               class="code sev- "><tt><i>624</i>         <span class="n">assert_hostname</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l625"
               class="code sev- "><tt><i>625</i>         <span class="n">assert_fingerprint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l626"
               class="code sev- "><tt><i>626</i>         <span class="n">ca_cert_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l627"
               class="code sev- "><tt><i>627</i>         <span class="n">ca_cert_data</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l628"
               class="code sev- "><tt><i>628</i>     <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l629"
               class="code sev- "><tt><i>629</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l630"
               class="code sev- "><tt><i>630</i> <span class="sd">        This method should only be called once, before the connection is used.</span></tt>
            </div>
            <div id="l631"
               class="code sev- "><tt><i>631</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l632"
               class="code sev- "><tt><i>632</i>         <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span></tt>
            </div>
            <div id="l633"
               class="code sev- "><tt><i>633</i>             <span class="s2">&quot;HTTPSConnection.set_cert() is deprecated and will be removed &quot;</span></tt>
            </div>
            <div id="l634"
               class="code sev- "><tt><i>634</i>             <span class="s2">&quot;in urllib3 v2.1.0. Instead provide the parameters to the &quot;</span></tt>
            </div>
            <div id="l635"
               class="code sev- "><tt><i>635</i>             <span class="s2">&quot;HTTPSConnection constructor.&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l636"
               class="code sev- "><tt><i>636</i>             <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">,</span></tt>
            </div>
            <div id="l637"
               class="code sev- "><tt><i>637</i>             <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span></tt>
            </div>
            <div id="l638"
               class="code sev- "><tt><i>638</i>         <span class="p">)</span></tt>
            </div>
            <div id="l639"
               class="code sev- "><tt><i>639</i> &nbsp;</tt>
            </div>
            <div id="l640"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (80 > 79 characters)</li>
               
               </ul><tt><i>640</i>         <span class="c1"># If cert_reqs is not provided we&#39;ll assume CERT_REQUIRED unless we also</span></tt>
            </div>
            <div id="l641"
               class="code sev- "><tt><i>641</i>         <span class="c1"># have an SSLContext object in which case we&#39;ll use its verify_mode.</span></tt>
            </div>
            <div id="l642"
               class="code sev- "><tt><i>642</i>         <span class="k">if</span> <span class="n">cert_reqs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l643"
               class="code sev- "><tt><i>643</i>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l644"
               class="code sev- "><tt><i>644</i>                 <span class="n">cert_reqs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span><span class="o">.</span><span class="n">verify_mode</span></tt>
            </div>
            <div id="l645"
               class="code sev- "><tt><i>645</i>             <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l646"
               class="code sev- "><tt><i>646</i>                 <span class="n">cert_reqs</span> <span class="o">=</span> <span class="n">resolve_cert_reqs</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></tt>
            </div>
            <div id="l647"
               class="code sev- "><tt><i>647</i> &nbsp;</tt>
            </div>
            <div id="l648"
               class="code sev- "><tt><i>648</i>         <span class="bp">self</span><span class="o">.</span><span class="n">key_file</span> <span class="o">=</span> <span class="n">key_file</span></tt>
            </div>
            <div id="l649"
               class="code sev- "><tt><i>649</i>         <span class="bp">self</span><span class="o">.</span><span class="n">cert_file</span> <span class="o">=</span> <span class="n">cert_file</span></tt>
            </div>
            <div id="l650"
               class="code sev- "><tt><i>650</i>         <span class="bp">self</span><span class="o">.</span><span class="n">cert_reqs</span> <span class="o">=</span> <span class="n">cert_reqs</span></tt>
            </div>
            <div id="l651"
               class="code sev- "><tt><i>651</i>         <span class="bp">self</span><span class="o">.</span><span class="n">key_password</span> <span class="o">=</span> <span class="n">key_password</span></tt>
            </div>
            <div id="l652"
               class="code sev- "><tt><i>652</i>         <span class="bp">self</span><span class="o">.</span><span class="n">assert_hostname</span> <span class="o">=</span> <span class="n">assert_hostname</span></tt>
            </div>
            <div id="l653"
               class="code sev- "><tt><i>653</i>         <span class="bp">self</span><span class="o">.</span><span class="n">assert_fingerprint</span> <span class="o">=</span> <span class="n">assert_fingerprint</span></tt>
            </div>
            <div id="l654"
               class="code sev- "><tt><i>654</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span> <span class="o">=</span> <span class="n">ca_certs</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">ca_certs</span><span class="p">)</span></tt>
            </div>
            <div id="l655"
               class="code sev- "><tt><i>655</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_dir</span> <span class="o">=</span> <span class="n">ca_cert_dir</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">ca_cert_dir</span><span class="p">)</span></tt>
            </div>
            <div id="l656"
               class="code sev- "><tt><i>656</i>         <span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_data</span> <span class="o">=</span> <span class="n">ca_cert_data</span></tt>
            </div>
            <div id="l657"
               class="code sev- "><tt><i>657</i> &nbsp;</tt>
            </div>
            <div id="l658"
               class="code sev- "><tt><i>658</i>     <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l659"
               class="code sev- "><tt><i>659</i>         <span class="c1"># Today we don&#39;t need to be doing this step before the /actual/ socket</span></tt>
            </div>
            <div id="l660"
               class="code sev- "><tt><i>660</i>         <span class="c1"># connection, however in the future we&#39;ll need to decide whether to</span></tt>
            </div>
            <div id="l661"
               class="code sev- "><tt><i>661</i>         <span class="c1"># create a new socket or re-use an existing &quot;shared&quot; socket as a part</span></tt>
            </div>
            <div id="l662"
               class="code sev- "><tt><i>662</i>         <span class="c1"># of the HTTP/2 handshake dance.</span></tt>
            </div>
            <div id="l663"
               class="code sev- "><tt><i>663</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_port</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l664"
               class="code sev- "><tt><i>664</i>             <span class="n">probe_http2_host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span></tt>
            </div>
            <div id="l665"
               class="code sev- "><tt><i>665</i>             <span class="n">probe_http2_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_port</span></tt>
            </div>
            <div id="l666"
               class="code sev- "><tt><i>666</i>         <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l667"
               class="code sev- "><tt><i>667</i>             <span class="n">probe_http2_host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span></tt>
            </div>
            <div id="l668"
               class="code sev- "><tt><i>668</i>             <span class="n">probe_http2_port</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">port</span></tt>
            </div>
            <div id="l669"
               class="code sev- "><tt><i>669</i> &nbsp;</tt>
            </div>
            <div id="l670"
               class="code sev- "><tt><i>670</i>         <span class="c1"># Check if the target origin supports HTTP/2.</span></tt>
            </div>
            <div id="l671"
               class="code sev- "><tt><i>671</i>         <span class="c1"># If the value comes back as &#39;None&#39; it means that the current thread</span></tt>
            </div>
            <div id="l672"
               class="code sev- "><tt><i>672</i>         <span class="c1"># is probing for HTTP/2 support. Otherwise, we&#39;re waiting for another</span></tt>
            </div>
            <div id="l673"
               class="code sev- "><tt><i>673</i>         <span class="c1"># probe to complete, or we get a value right away.</span></tt>
            </div>
            <div id="l674"
               class="code sev- "><tt><i>674</i>         <span class="n">target_supports_http2</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span></tt>
            </div>
            <div id="l675"
               class="code sev- "><tt><i>675</i>         <span class="k">if</span> <span class="s2">&quot;h2&quot;</span> <span class="ow">in</span> <span class="n">ssl_</span><span class="o">.</span><span class="n">ALPN_PROTOCOLS</span><span class="p">:</span></tt>
            </div>
            <div id="l676"
               class="code sev- "><tt><i>676</i>             <span class="n">target_supports_http2</span> <span class="o">=</span> <span class="n">http2_probe</span><span class="o">.</span><span class="n">acquire_and_get</span><span class="p">(</span></tt>
            </div>
            <div id="l677"
               class="code sev- "><tt><i>677</i>                 <span class="n">host</span><span class="o">=</span><span class="n">probe_http2_host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">probe_http2_port</span></tt>
            </div>
            <div id="l678"
               class="code sev- "><tt><i>678</i>             <span class="p">)</span></tt>
            </div>
            <div id="l679"
               class="code sev- "><tt><i>679</i>         <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l680"
               class="code sev- "><tt><i>680</i>             <span class="c1"># If HTTP/2 isn&#39;t going to be offered it doesn&#39;t matter if</span></tt>
            </div>
            <div id="l681"
               class="code sev- "><tt><i>681</i>             <span class="c1"># the target supports HTTP/2. Don&#39;t want to make a probe.</span></tt>
            </div>
            <div id="l682"
               class="code sev- "><tt><i>682</i>             <span class="n">target_supports_http2</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l683"
               class="code sev- "><tt><i>683</i> &nbsp;</tt>
            </div>
            <div id="l684"
               class="code sev- "><tt><i>684</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l685"
               class="code sev- "><tt><i>685</i>             <span class="bp">self</span><span class="o">.</span><span class="n">_connect_callback</span><span class="p">(</span></tt>
            </div>
            <div id="l686"
               class="code sev- "><tt><i>686</i>                 <span class="s2">&quot;before connect&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l687"
               class="code sev- "><tt><i>687</i>                 <span class="n">thread_id</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">get_ident</span><span class="p">(),</span></tt>
            </div>
            <div id="l688"
               class="code sev- "><tt><i>688</i>                 <span class="n">target_supports_http2</span><span class="o">=</span><span class="n">target_supports_http2</span><span class="p">,</span></tt>
            </div>
            <div id="l689"
               class="code sev- "><tt><i>689</i>             <span class="p">)</span></tt>
            </div>
            <div id="l690"
               class="code sev- "><tt><i>690</i> &nbsp;</tt>
            </div>
            <div id="l691"
               class="code sev- "><tt><i>691</i>         <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l692"
               class="code sev- "><tt><i>692</i>             <span class="n">sock</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span> <span class="o">|</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLSocket</span></tt>
            </div>
            <div id="l693"
               class="code sev- "><tt><i>693</i>             <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_conn</span><span class="p">()</span></tt>
            </div>
            <div id="l694"
               class="code sev- "><tt><i>694</i>             <span class="n">server_hostname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span></tt>
            </div>
            <div id="l695"
               class="code sev- "><tt><i>695</i>             <span class="n">tls_in_tls</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l696"
               class="code sev- "><tt><i>696</i> &nbsp;</tt>
            </div>
            <div id="l697"
               class="code sev- "><tt><i>697</i>             <span class="c1"># Do we need to establish a tunnel?</span></tt>
            </div>
            <div id="l698"
               class="code sev- "><tt><i>698</i>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l699"
               class="code sev- "><tt><i>699</i>                 <span class="c1"># We&#39;re tunneling to an HTTPS origin so need to do TLS-in-TLS.</span></tt>
            </div>
            <div id="l700"
               class="code sev- "><tt><i>700</i>                 <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_scheme</span> <span class="o">==</span> <span class="s2">&quot;https&quot;</span><span class="p">:</span></tt>
            </div>
            <div id="l701"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (81 > 79 characters)</li>
               
               </ul><tt><i>701</i>                     <span class="c1"># _connect_tls_proxy will verify and assign proxy_is_verified</span></tt>
            </div>
            <div id="l702"
               class="code sev- "><tt><i>702</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">sock</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect_tls_proxy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">sock</span><span class="p">)</span></tt>
            </div>
            <div id="l703"
               class="code sev- "><tt><i>703</i>                     <span class="n">tls_in_tls</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l704"
               class="code sev- "><tt><i>704</i>                 <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_scheme</span> <span class="o">==</span> <span class="s2">&quot;http&quot;</span><span class="p">:</span></tt>
            </div>
            <div id="l705"
               class="code sev- "><tt><i>705</i>                     <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l706"
               class="code sev- "><tt><i>706</i> &nbsp;</tt>
            </div>
            <div id="l707"
               class="code sev- "><tt><i>707</i>                 <span class="c1"># If we&#39;re tunneling it means we&#39;re connected to our proxy.</span></tt>
            </div>
            <div id="l708"
               class="code sev- "><tt><i>708</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l709"
               class="code sev- "><tt><i>709</i> &nbsp;</tt>
            </div>
            <div id="l710"
               class="code sev- "><tt><i>710</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel</span><span class="p">()</span></tt>
            </div>
            <div id="l711"
               class="code sev- "><tt><i>711</i>                 <span class="c1"># Override the host with the one we&#39;re requesting data from.</span></tt>
            </div>
            <div id="l712"
               class="code sev- "><tt><i>712</i>                 <span class="n">server_hostname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tunnel_host</span></tt>
            </div>
            <div id="l713"
               class="code sev- "><tt><i>713</i> &nbsp;</tt>
            </div>
            <div id="l714"
               class="code sev- "><tt><i>714</i>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_hostname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l715"
               class="code sev- "><tt><i>715</i>                 <span class="n">server_hostname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server_hostname</span></tt>
            </div>
            <div id="l716"
               class="code sev- "><tt><i>716</i> &nbsp;</tt>
            </div>
            <div id="l717"
               class="code sev- "><tt><i>717</i>             <span class="n">is_time_off</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">RECENT_DATE</span></tt>
            </div>
            <div id="l718"
               class="code sev- "><tt><i>718</i>             <span class="k">if</span> <span class="n">is_time_off</span><span class="p">:</span></tt>
            </div>
            <div id="l719"
               class="code sev- "><tt><i>719</i>                 <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span></tt>
            </div>
            <div id="l720"
               class="code sev- "><tt><i>720</i>                     <span class="p">(</span></tt>
            </div>
            <div id="l721"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (93 > 79 characters)</li>
               
               </ul><tt><i>721</i>                         <span class="sa">f</span><span class="s2">&quot;System time is way off (before </span><span class="si">{</span><span class="n">RECENT_DATE</span><span class="si">}</span><span class="s2">). This will probably &quot;</span></tt>
            </div>
            <div id="l722"
               class="code sev- "><tt><i>722</i>                         <span class="s2">&quot;lead to SSL verification errors&quot;</span></tt>
            </div>
            <div id="l723"
               class="code sev- "><tt><i>723</i>                     <span class="p">),</span></tt>
            </div>
            <div id="l724"
               class="code sev- "><tt><i>724</i>                     <span class="n">SystemTimeWarning</span><span class="p">,</span></tt>
            </div>
            <div id="l725"
               class="code sev- "><tt><i>725</i>                 <span class="p">)</span></tt>
            </div>
            <div id="l726"
               class="code sev- "><tt><i>726</i> &nbsp;</tt>
            </div>
            <div id="l727"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>727</i>             <span class="c1"># Remove trailing &#39;.&#39; from fqdn hostnames to allow certificate validation</span></tt>
            </div>
            <div id="l728"
               class="code sev- "><tt><i>728</i>             <span class="n">server_hostname_rm_dot</span> <span class="o">=</span> <span class="n">server_hostname</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l729"
               class="code sev- "><tt><i>729</i> &nbsp;</tt>
            </div>
            <div id="l730"
               class="code sev- "><tt><i>730</i>             <span class="n">sock_and_verified</span> <span class="o">=</span> <span class="n">_ssl_wrap_socket_and_match_hostname</span><span class="p">(</span></tt>
            </div>
            <div id="l731"
               class="code sev- "><tt><i>731</i>                 <span class="n">sock</span><span class="o">=</span><span class="n">sock</span><span class="p">,</span></tt>
            </div>
            <div id="l732"
               class="code sev- "><tt><i>732</i>                 <span class="n">cert_reqs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_reqs</span><span class="p">,</span></tt>
            </div>
            <div id="l733"
               class="code sev- "><tt><i>733</i>                 <span class="n">ssl_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_version</span><span class="p">,</span></tt>
            </div>
            <div id="l734"
               class="code sev- "><tt><i>734</i>                 <span class="n">ssl_minimum_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_minimum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l735"
               class="code sev- "><tt><i>735</i>                 <span class="n">ssl_maximum_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_maximum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l736"
               class="code sev- "><tt><i>736</i>                 <span class="n">ca_certs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span><span class="p">,</span></tt>
            </div>
            <div id="l737"
               class="code sev- "><tt><i>737</i>                 <span class="n">ca_cert_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_dir</span><span class="p">,</span></tt>
            </div>
            <div id="l738"
               class="code sev- "><tt><i>738</i>                 <span class="n">ca_cert_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_data</span><span class="p">,</span></tt>
            </div>
            <div id="l739"
               class="code sev- "><tt><i>739</i>                 <span class="n">cert_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_file</span><span class="p">,</span></tt>
            </div>
            <div id="l740"
               class="code sev- "><tt><i>740</i>                 <span class="n">key_file</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">key_file</span><span class="p">,</span></tt>
            </div>
            <div id="l741"
               class="code sev- "><tt><i>741</i>                 <span class="n">key_password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">key_password</span><span class="p">,</span></tt>
            </div>
            <div id="l742"
               class="code sev- "><tt><i>742</i>                 <span class="n">server_hostname</span><span class="o">=</span><span class="n">server_hostname_rm_dot</span><span class="p">,</span></tt>
            </div>
            <div id="l743"
               class="code sev- "><tt><i>743</i>                 <span class="n">ssl_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_context</span><span class="p">,</span></tt>
            </div>
            <div id="l744"
               class="code sev- "><tt><i>744</i>                 <span class="n">tls_in_tls</span><span class="o">=</span><span class="n">tls_in_tls</span><span class="p">,</span></tt>
            </div>
            <div id="l745"
               class="code sev- "><tt><i>745</i>                 <span class="n">assert_hostname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assert_hostname</span><span class="p">,</span></tt>
            </div>
            <div id="l746"
               class="code sev- "><tt><i>746</i>                 <span class="n">assert_fingerprint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">assert_fingerprint</span><span class="p">,</span></tt>
            </div>
            <div id="l747"
               class="code sev- "><tt><i>747</i>             <span class="p">)</span></tt>
            </div>
            <div id="l748"
               class="code sev- "><tt><i>748</i>             <span class="bp">self</span><span class="o">.</span><span class="n">sock</span> <span class="o">=</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">socket</span></tt>
            </div>
            <div id="l749"
               class="code sev- "><tt><i>749</i> &nbsp;</tt>
            </div>
            <div id="l750"
               class="code sev- "><tt><i>750</i>         <span class="c1"># If an error occurs during connection/handshake we may need to release</span></tt>
            </div>
            <div id="l751"
               class="code sev- "><tt><i>751</i>         <span class="c1"># our lock so another connection can probe the origin.</span></tt>
            </div>
            <div id="l752"
               class="code sev- "><tt><i>752</i>         <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span></tt>
            </div>
            <div id="l753"
               class="code sev- "><tt><i>753</i>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_connect_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l754"
               class="code sev- "><tt><i>754</i>                 <span class="bp">self</span><span class="o">.</span><span class="n">_connect_callback</span><span class="p">(</span></tt>
            </div>
            <div id="l755"
               class="code sev- "><tt><i>755</i>                     <span class="s2">&quot;after connect failure&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l756"
               class="code sev- "><tt><i>756</i>                     <span class="n">thread_id</span><span class="o">=</span><span class="n">threading</span><span class="o">.</span><span class="n">get_ident</span><span class="p">(),</span></tt>
            </div>
            <div id="l757"
               class="code sev- "><tt><i>757</i>                     <span class="n">target_supports_http2</span><span class="o">=</span><span class="n">target_supports_http2</span><span class="p">,</span></tt>
            </div>
            <div id="l758"
               class="code sev- "><tt><i>758</i>                 <span class="p">)</span></tt>
            </div>
            <div id="l759"
               class="code sev- "><tt><i>759</i> &nbsp;</tt>
            </div>
            <div id="l760"
               class="code sev- "><tt><i>760</i>             <span class="k">if</span> <span class="n">target_supports_http2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l761"
               class="code sev- "><tt><i>761</i>                 <span class="n">http2_probe</span><span class="o">.</span><span class="n">set_and_release</span><span class="p">(</span></tt>
            </div>
            <div id="l762"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>762</i>                     <span class="n">host</span><span class="o">=</span><span class="n">probe_http2_host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">probe_http2_port</span><span class="p">,</span> <span class="n">supports_http2</span><span class="o">=</span><span class="kc">None</span></tt>
            </div>
            <div id="l763"
               class="code sev- "><tt><i>763</i>                 <span class="p">)</span></tt>
            </div>
            <div id="l764"
               class="code sev- "><tt><i>764</i>             <span class="k">raise</span></tt>
            </div>
            <div id="l765"
               class="code sev- "><tt><i>765</i> &nbsp;</tt>
            </div>
            <div id="l766"
               class="code sev- "><tt><i>766</i>         <span class="c1"># If this connection doesn&#39;t know if the origin supports HTTP/2</span></tt>
            </div>
            <div id="l767"
               class="code sev- "><tt><i>767</i>         <span class="c1"># we report back to the HTTP/2 probe our result.</span></tt>
            </div>
            <div id="l768"
               class="code sev- "><tt><i>768</i>         <span class="k">if</span> <span class="n">target_supports_http2</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l769"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>769</i>             <span class="n">supports_http2</span> <span class="o">=</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">selected_alpn_protocol</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;h2&quot;</span></tt>
            </div>
            <div id="l770"
               class="code sev- "><tt><i>770</i>             <span class="n">http2_probe</span><span class="o">.</span><span class="n">set_and_release</span><span class="p">(</span></tt>
            </div>
            <div id="l771"
               class="code sev- "><tt><i>771</i>                 <span class="n">host</span><span class="o">=</span><span class="n">probe_http2_host</span><span class="p">,</span></tt>
            </div>
            <div id="l772"
               class="code sev- "><tt><i>772</i>                 <span class="n">port</span><span class="o">=</span><span class="n">probe_http2_port</span><span class="p">,</span></tt>
            </div>
            <div id="l773"
               class="code sev- "><tt><i>773</i>                 <span class="n">supports_http2</span><span class="o">=</span><span class="n">supports_http2</span><span class="p">,</span></tt>
            </div>
            <div id="l774"
               class="code sev- "><tt><i>774</i>             <span class="p">)</span></tt>
            </div>
            <div id="l775"
               class="code sev- "><tt><i>775</i> &nbsp;</tt>
            </div>
            <div id="l776"
               class="code sev- "><tt><i>776</i>         <span class="c1"># Forwarding proxies can never have a verified target since</span></tt>
            </div>
            <div id="l777"
               class="code sev- "><tt><i>777</i>         <span class="c1"># the proxy is the one doing the verification. Should instead</span></tt>
            </div>
            <div id="l778"
               class="code sev- "><tt><i>778</i>         <span class="c1"># use a CONNECT tunnel in order to verify the target.</span></tt>
            </div>
            <div id="l779"
               class="code sev- "><tt><i>779</i>         <span class="c1"># See: https://github.com/urllib3/urllib3/issues/3267.</span></tt>
            </div>
            <div id="l780"
               class="code sev- "><tt><i>780</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_forwarding</span><span class="p">:</span></tt>
            </div>
            <div id="l781"
               class="code sev- "><tt><i>781</i>             <span class="bp">self</span><span class="o">.</span><span class="n">is_verified</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l782"
               class="code sev- "><tt><i>782</i>         <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l783"
               class="code sev- "><tt><i>783</i>             <span class="bp">self</span><span class="o">.</span><span class="n">is_verified</span> <span class="o">=</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">is_verified</span></tt>
            </div>
            <div id="l784"
               class="code sev- "><tt><i>784</i> &nbsp;</tt>
            </div>
            <div id="l785"
               class="code sev- "><tt><i>785</i>         <span class="c1"># If there&#39;s a proxy to be connected to we are fully connected.</span></tt>
            </div>
            <div id="l786"
               class="code sev- "><tt><i>786</i>         <span class="c1"># This is set twice (once above and here) due to forwarding proxies</span></tt>
            </div>
            <div id="l787"
               class="code sev- "><tt><i>787</i>         <span class="c1"># not using tunnelling.</span></tt>
            </div>
            <div id="l788"
               class="code sev- "><tt><i>788</i>         <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proxy</span><span class="p">)</span></tt>
            </div>
            <div id="l789"
               class="code sev- "><tt><i>789</i> &nbsp;</tt>
            </div>
            <div id="l790"
               class="code sev- "><tt><i>790</i>         <span class="c1"># Set `self.proxy_is_verified` unless it&#39;s already set while</span></tt>
            </div>
            <div id="l791"
               class="code sev- "><tt><i>791</i>         <span class="c1"># establishing a tunnel.</span></tt>
            </div>
            <div id="l792"
               class="code sev- "><tt><i>792</i>         <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_connected_to_proxy</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l793"
               class="code sev- "><tt><i>793</i>             <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="o">=</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">is_verified</span></tt>
            </div>
            <div id="l794"
               class="code sev- "><tt><i>794</i> &nbsp;</tt>
            </div>
            <div id="l795"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>795</i>     <span class="k">def</span> <span class="nf">_connect_tls_proxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sock</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLSocket</span><span class="p">:</span></tt>
            </div>
            <div id="l796"
               class="code sev- "><tt><i>796</i> <span class="w">        </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l797"
               class="code sev- "><tt><i>797</i> <span class="sd">        Establish a TLS connection to the proxy using the provided SSL context.</span></tt>
            </div>
            <div id="l798"
               class="code sev- "><tt><i>798</i> <span class="sd">        &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l799"
               class="code sev- "><tt><i>799</i>         <span class="c1"># `_connect_tls_proxy` is called when self._tunnel_host is truthy.</span></tt>
            </div>
            <div id="l800"
               class="code sev- "><tt><i>800</i>         <span class="n">proxy_config</span> <span class="o">=</span> <span class="n">typing</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">ProxyConfig</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxy_config</span><span class="p">)</span></tt>
            </div>
            <div id="l801"
               class="code sev- "><tt><i>801</i>         <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">proxy_config</span><span class="o">.</span><span class="n">ssl_context</span></tt>
            </div>
            <div id="l802"
               class="code sev- "><tt><i>802</i>         <span class="n">sock_and_verified</span> <span class="o">=</span> <span class="n">_ssl_wrap_socket_and_match_hostname</span><span class="p">(</span></tt>
            </div>
            <div id="l803"
               class="code sev- "><tt><i>803</i>             <span class="n">sock</span><span class="p">,</span></tt>
            </div>
            <div id="l804"
               class="code sev- "><tt><i>804</i>             <span class="n">cert_reqs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cert_reqs</span><span class="p">,</span></tt>
            </div>
            <div id="l805"
               class="code sev- "><tt><i>805</i>             <span class="n">ssl_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_version</span><span class="p">,</span></tt>
            </div>
            <div id="l806"
               class="code sev- "><tt><i>806</i>             <span class="n">ssl_minimum_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_minimum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l807"
               class="code sev- "><tt><i>807</i>             <span class="n">ssl_maximum_version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ssl_maximum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l808"
               class="code sev- "><tt><i>808</i>             <span class="n">ca_certs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_certs</span><span class="p">,</span></tt>
            </div>
            <div id="l809"
               class="code sev- "><tt><i>809</i>             <span class="n">ca_cert_dir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_dir</span><span class="p">,</span></tt>
            </div>
            <div id="l810"
               class="code sev- "><tt><i>810</i>             <span class="n">ca_cert_data</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ca_cert_data</span><span class="p">,</span></tt>
            </div>
            <div id="l811"
               class="code sev- "><tt><i>811</i>             <span class="n">server_hostname</span><span class="o">=</span><span class="n">hostname</span><span class="p">,</span></tt>
            </div>
            <div id="l812"
               class="code sev- "><tt><i>812</i>             <span class="n">ssl_context</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">,</span></tt>
            </div>
            <div id="l813"
               class="code sev- "><tt><i>813</i>             <span class="n">assert_hostname</span><span class="o">=</span><span class="n">proxy_config</span><span class="o">.</span><span class="n">assert_hostname</span><span class="p">,</span></tt>
            </div>
            <div id="l814"
               class="code sev- "><tt><i>814</i>             <span class="n">assert_fingerprint</span><span class="o">=</span><span class="n">proxy_config</span><span class="o">.</span><span class="n">assert_fingerprint</span><span class="p">,</span></tt>
            </div>
            <div id="l815"
               class="code sev- "><tt><i>815</i>             <span class="c1"># Features that aren&#39;t implemented for proxies yet:</span></tt>
            </div>
            <div id="l816"
               class="code sev- "><tt><i>816</i>             <span class="n">cert_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l817"
               class="code sev- "><tt><i>817</i>             <span class="n">key_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l818"
               class="code sev- "><tt><i>818</i>             <span class="n">key_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l819"
               class="code sev- "><tt><i>819</i>             <span class="n">tls_in_tls</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l820"
               class="code sev- "><tt><i>820</i>         <span class="p">)</span></tt>
            </div>
            <div id="l821"
               class="code sev- "><tt><i>821</i>         <span class="bp">self</span><span class="o">.</span><span class="n">proxy_is_verified</span> <span class="o">=</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">is_verified</span></tt>
            </div>
            <div id="l822"
               class="code sev- "><tt><i>822</i>         <span class="k">return</span> <span class="n">sock_and_verified</span><span class="o">.</span><span class="n">socket</span>  <span class="c1"># type: ignore[return-value]</span></tt>
            </div>
            <div id="l823"
               class="code sev- "><tt><i>823</i> &nbsp;</tt>
            </div>
            <div id="l824"
               class="code sev- "><tt><i>824</i> &nbsp;</tt>
            </div>
            <div id="l825"
               class="code sev- "><tt><i>825</i> <span class="k">class</span> <span class="nc">_WrappedAndVerifiedSocket</span><span class="p">(</span><span class="n">typing</span><span class="o">.</span><span class="n">NamedTuple</span><span class="p">):</span></tt>
            </div>
            <div id="l826"
               class="code sev- "><tt><i>826</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l827"
               class="code sev- "><tt><i>827</i> <span class="sd">    Wrapped socket and whether the connection is</span></tt>
            </div>
            <div id="l828"
               class="code sev- "><tt><i>828</i> <span class="sd">    verified after the TLS handshake</span></tt>
            </div>
            <div id="l829"
               class="code sev- "><tt><i>829</i> <span class="sd">    &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l830"
               class="code sev- "><tt><i>830</i> &nbsp;</tt>
            </div>
            <div id="l831"
               class="code sev- "><tt><i>831</i>     <span class="n">socket</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLSocket</span> <span class="o">|</span> <span class="n">SSLTransport</span></tt>
            </div>
            <div id="l832"
               class="code sev- "><tt><i>832</i>     <span class="n">is_verified</span><span class="p">:</span> <span class="nb">bool</span></tt>
            </div>
            <div id="l833"
               class="code sev- "><tt><i>833</i> &nbsp;</tt>
            </div>
            <div id="l834"
               class="code sev- "><tt><i>834</i> &nbsp;</tt>
            </div>
            <div id="l835"
               class="code sev- "><tt><i>835</i> <span class="k">def</span> <span class="nf">_ssl_wrap_socket_and_match_hostname</span><span class="p">(</span></tt>
            </div>
            <div id="l836"
               class="code sev- "><tt><i>836</i>     <span class="n">sock</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span></tt>
            </div>
            <div id="l837"
               class="code sev- "><tt><i>837</i>     <span class="o">*</span><span class="p">,</span></tt>
            </div>
            <div id="l838"
               class="code sev- "><tt><i>838</i>     <span class="n">cert_reqs</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span></tt>
            </div>
            <div id="l839"
               class="code sev- "><tt><i>839</i>     <span class="n">ssl_version</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">int</span><span class="p">,</span></tt>
            </div>
            <div id="l840"
               class="code sev- "><tt><i>840</i>     <span class="n">ssl_minimum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l841"
               class="code sev- "><tt><i>841</i>     <span class="n">ssl_maximum_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l842"
               class="code sev- "><tt><i>842</i>     <span class="n">cert_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l843"
               class="code sev- "><tt><i>843</i>     <span class="n">key_file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l844"
               class="code sev- "><tt><i>844</i>     <span class="n">key_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l845"
               class="code sev- "><tt><i>845</i>     <span class="n">ca_certs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l846"
               class="code sev- "><tt><i>846</i>     <span class="n">ca_cert_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l847"
               class="code sev- "><tt><i>847</i>     <span class="n">ca_cert_data</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span></tt>
            </div>
            <div id="l848"
               class="code sev- "><tt><i>848</i>     <span class="n">assert_hostname</span><span class="p">:</span> <span class="kc">None</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">],</span></tt>
            </div>
            <div id="l849"
               class="code sev- "><tt><i>849</i>     <span class="n">assert_fingerprint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l850"
               class="code sev- "><tt><i>850</i>     <span class="n">server_hostname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l851"
               class="code sev- "><tt><i>851</i>     <span class="n">ssl_context</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">SSLContext</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l852"
               class="code sev- "><tt><i>852</i>     <span class="n">tls_in_tls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l853"
               class="code sev- "><tt><i>853</i> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_WrappedAndVerifiedSocket</span><span class="p">:</span></tt>
            </div>
            <div id="l854"
               class="code sev- "><tt><i>854</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;Logic for constructing an SSLContext from all TLS parameters, passing</span></tt>
            </div>
            <div id="l855"
               class="code sev- "><tt><i>855</i> <span class="sd">    that down into ssl_wrap_socket, and then doing certificate verification</span></tt>
            </div>
            <div id="l856"
               class="code sev- "><tt><i>856</i> <span class="sd">    either via hostname or fingerprint. This function exists to guarantee</span></tt>
            </div>
            <div id="l857"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (81 > 79 characters)</li>
               
               </ul><tt><i>857</i> <span class="sd">    that both proxies and targets have the same behavior when connecting via TLS.</span></tt>
            </div>
            <div id="l858"
               class="code sev- "><tt><i>858</i> <span class="sd">    &quot;&quot;&quot;</span></tt>
            </div>
            <div id="l859"
               class="code sev- "><tt><i>859</i>     <span class="n">default_ssl_context</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l860"
               class="code sev- "><tt><i>860</i>     <span class="k">if</span> <span class="n">ssl_context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l861"
               class="code sev- "><tt><i>861</i>         <span class="n">default_ssl_context</span> <span class="o">=</span> <span class="kc">True</span></tt>
            </div>
            <div id="l862"
               class="code sev- "><tt><i>862</i>         <span class="n">context</span> <span class="o">=</span> <span class="n">create_urllib3_context</span><span class="p">(</span></tt>
            </div>
            <div id="l863"
               class="code sev- "><tt><i>863</i>             <span class="n">ssl_version</span><span class="o">=</span><span class="n">resolve_ssl_version</span><span class="p">(</span><span class="n">ssl_version</span><span class="p">),</span></tt>
            </div>
            <div id="l864"
               class="code sev- "><tt><i>864</i>             <span class="n">ssl_minimum_version</span><span class="o">=</span><span class="n">ssl_minimum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l865"
               class="code sev- "><tt><i>865</i>             <span class="n">ssl_maximum_version</span><span class="o">=</span><span class="n">ssl_maximum_version</span><span class="p">,</span></tt>
            </div>
            <div id="l866"
               class="code sev- "><tt><i>866</i>             <span class="n">cert_reqs</span><span class="o">=</span><span class="n">resolve_cert_reqs</span><span class="p">(</span><span class="n">cert_reqs</span><span class="p">),</span></tt>
            </div>
            <div id="l867"
               class="code sev- "><tt><i>867</i>         <span class="p">)</span></tt>
            </div>
            <div id="l868"
               class="code sev- "><tt><i>868</i>     <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l869"
               class="code sev- "><tt><i>869</i>         <span class="n">context</span> <span class="o">=</span> <span class="n">ssl_context</span></tt>
            </div>
            <div id="l870"
               class="code sev- "><tt><i>870</i> &nbsp;</tt>
            </div>
            <div id="l871"
               class="code sev- "><tt><i>871</i>     <span class="n">context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">=</span> <span class="n">resolve_cert_reqs</span><span class="p">(</span><span class="n">cert_reqs</span><span class="p">)</span></tt>
            </div>
            <div id="l872"
               class="code sev- "><tt><i>872</i> &nbsp;</tt>
            </div>
            <div id="l873"
               class="code sev- "><tt><i>873</i>     <span class="c1"># In some cases, we want to verify hostnames ourselves</span></tt>
            </div>
            <div id="l874"
               class="code sev- "><tt><i>874</i>     <span class="k">if</span> <span class="p">(</span></tt>
            </div>
            <div id="l875"
               class="code sev- "><tt><i>875</i>         <span class="c1"># `ssl` can&#39;t verify fingerprints or alternate hostnames</span></tt>
            </div>
            <div id="l876"
               class="code sev- "><tt><i>876</i>         <span class="n">assert_fingerprint</span></tt>
            </div>
            <div id="l877"
               class="code sev- "><tt><i>877</i>         <span class="ow">or</span> <span class="n">assert_hostname</span></tt>
            </div>
            <div id="l878"
               class="code sev- "><tt><i>878</i>         <span class="c1"># assert_hostname can be set to False to disable hostname checking</span></tt>
            </div>
            <div id="l879"
               class="code sev- "><tt><i>879</i>         <span class="ow">or</span> <span class="n">assert_hostname</span> <span class="ow">is</span> <span class="kc">False</span></tt>
            </div>
            <div id="l880"
               class="code sev- "><tt><i>880</i>         <span class="c1"># We still support OpenSSL 1.0.2, which prevents us from verifying</span></tt>
            </div>
            <div id="l881"
               class="code sev- "><tt><i>881</i>         <span class="c1"># hostnames easily: https://github.com/pyca/pyopenssl/pull/933</span></tt>
            </div>
            <div id="l882"
               class="code sev- "><tt><i>882</i>         <span class="ow">or</span> <span class="n">ssl_</span><span class="o">.</span><span class="n">IS_PYOPENSSL</span></tt>
            </div>
            <div id="l883"
               class="code sev- "><tt><i>883</i>         <span class="ow">or</span> <span class="ow">not</span> <span class="n">ssl_</span><span class="o">.</span><span class="n">HAS_NEVER_CHECK_COMMON_NAME</span></tt>
            </div>
            <div id="l884"
               class="code sev- "><tt><i>884</i>     <span class="p">):</span></tt>
            </div>
            <div id="l885"
               class="code sev- "><tt><i>885</i>         <span class="n">context</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l886"
               class="code sev- "><tt><i>886</i> &nbsp;</tt>
            </div>
            <div id="l887"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (87 > 79 characters)</li>
               
               </ul><tt><i>887</i>     <span class="c1"># Try to load OS default certs if none are given. We need to do the hasattr() check</span></tt>
            </div>
            <div id="l888"
               class="code sev- "><tt><i>888</i>     <span class="c1"># for custom pyOpenSSL SSLContext objects because they don&#39;t support</span></tt>
            </div>
            <div id="l889"
               class="code sev- "><tt><i>889</i>     <span class="c1"># load_default_certs().</span></tt>
            </div>
            <div id="l890"
               class="code sev- "><tt><i>890</i>     <span class="k">if</span> <span class="p">(</span></tt>
            </div>
            <div id="l891"
               class="code sev- "><tt><i>891</i>         <span class="ow">not</span> <span class="n">ca_certs</span></tt>
            </div>
            <div id="l892"
               class="code sev- "><tt><i>892</i>         <span class="ow">and</span> <span class="ow">not</span> <span class="n">ca_cert_dir</span></tt>
            </div>
            <div id="l893"
               class="code sev- "><tt><i>893</i>         <span class="ow">and</span> <span class="ow">not</span> <span class="n">ca_cert_data</span></tt>
            </div>
            <div id="l894"
               class="code sev- "><tt><i>894</i>         <span class="ow">and</span> <span class="n">default_ssl_context</span></tt>
            </div>
            <div id="l895"
               class="code sev- "><tt><i>895</i>         <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s2">&quot;load_default_certs&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l896"
               class="code sev- "><tt><i>896</i>     <span class="p">):</span></tt>
            </div>
            <div id="l897"
               class="code sev- "><tt><i>897</i>         <span class="n">context</span><span class="o">.</span><span class="n">load_default_certs</span><span class="p">()</span></tt>
            </div>
            <div id="l898"
               class="code sev- "><tt><i>898</i> &nbsp;</tt>
            </div>
            <div id="l899"
               class="code sev- "><tt><i>899</i>     <span class="c1"># Ensure that IPv6 addresses are in the proper format and don&#39;t have a</span></tt>
            </div>
            <div id="l900"
               class="code sev- "><tt><i>900</i>     <span class="c1"># scope ID. Python&#39;s SSL module fails to recognize scoped IPv6 addresses</span></tt>
            </div>
            <div id="l901"
               class="code sev- "><tt><i>901</i>     <span class="c1"># and interprets them as DNS hostnames.</span></tt>
            </div>
            <div id="l902"
               class="code sev- "><tt><i>902</i>     <span class="k">if</span> <span class="n">server_hostname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l903"
               class="code sev- "><tt><i>903</i>         <span class="n">normalized</span> <span class="o">=</span> <span class="n">server_hostname</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l904"
               class="code sev- "><tt><i>904</i>         <span class="k">if</span> <span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">normalized</span><span class="p">:</span></tt>
            </div>
            <div id="l905"
               class="code sev- "><tt><i>905</i>             <span class="n">normalized</span> <span class="o">=</span> <span class="n">normalized</span><span class="p">[:</span> <span class="n">normalized</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">)]</span></tt>
            </div>
            <div id="l906"
               class="code sev- "><tt><i>906</i>         <span class="k">if</span> <span class="n">is_ipaddress</span><span class="p">(</span><span class="n">normalized</span><span class="p">):</span></tt>
            </div>
            <div id="l907"
               class="code sev- "><tt><i>907</i>             <span class="n">server_hostname</span> <span class="o">=</span> <span class="n">normalized</span></tt>
            </div>
            <div id="l908"
               class="code sev- "><tt><i>908</i> &nbsp;</tt>
            </div>
            <div id="l909"
               class="code sev- "><tt><i>909</i>     <span class="n">ssl_sock</span> <span class="o">=</span> <span class="n">ssl_wrap_socket</span><span class="p">(</span></tt>
            </div>
            <div id="l910"
               class="code sev- "><tt><i>910</i>         <span class="n">sock</span><span class="o">=</span><span class="n">sock</span><span class="p">,</span></tt>
            </div>
            <div id="l911"
               class="code sev- "><tt><i>911</i>         <span class="n">keyfile</span><span class="o">=</span><span class="n">key_file</span><span class="p">,</span></tt>
            </div>
            <div id="l912"
               class="code sev- "><tt><i>912</i>         <span class="n">certfile</span><span class="o">=</span><span class="n">cert_file</span><span class="p">,</span></tt>
            </div>
            <div id="l913"
               class="code sev- "><tt><i>913</i>         <span class="n">key_password</span><span class="o">=</span><span class="n">key_password</span><span class="p">,</span></tt>
            </div>
            <div id="l914"
               class="code sev- "><tt><i>914</i>         <span class="n">ca_certs</span><span class="o">=</span><span class="n">ca_certs</span><span class="p">,</span></tt>
            </div>
            <div id="l915"
               class="code sev- "><tt><i>915</i>         <span class="n">ca_cert_dir</span><span class="o">=</span><span class="n">ca_cert_dir</span><span class="p">,</span></tt>
            </div>
            <div id="l916"
               class="code sev- "><tt><i>916</i>         <span class="n">ca_cert_data</span><span class="o">=</span><span class="n">ca_cert_data</span><span class="p">,</span></tt>
            </div>
            <div id="l917"
               class="code sev- "><tt><i>917</i>         <span class="n">server_hostname</span><span class="o">=</span><span class="n">server_hostname</span><span class="p">,</span></tt>
            </div>
            <div id="l918"
               class="code sev- "><tt><i>918</i>         <span class="n">ssl_context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span></tt>
            </div>
            <div id="l919"
               class="code sev- "><tt><i>919</i>         <span class="n">tls_in_tls</span><span class="o">=</span><span class="n">tls_in_tls</span><span class="p">,</span></tt>
            </div>
            <div id="l920"
               class="code sev- "><tt><i>920</i>     <span class="p">)</span></tt>
            </div>
            <div id="l921"
               class="code sev- "><tt><i>921</i> &nbsp;</tt>
            </div>
            <div id="l922"
               class="code sev- "><tt><i>922</i>     <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l923"
               class="code sev- "><tt><i>923</i>         <span class="k">if</span> <span class="n">assert_fingerprint</span><span class="p">:</span></tt>
            </div>
            <div id="l924"
               class="code sev- "><tt><i>924</i>             <span class="n">_assert_fingerprint</span><span class="p">(</span></tt>
            </div>
            <div id="l925"
               class="code sev- "><tt><i>925</i>                 <span class="n">ssl_sock</span><span class="o">.</span><span class="n">getpeercert</span><span class="p">(</span><span class="n">binary_form</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">assert_fingerprint</span></tt>
            </div>
            <div id="l926"
               class="code sev- "><tt><i>926</i>             <span class="p">)</span></tt>
            </div>
            <div id="l927"
               class="code sev- "><tt><i>927</i>         <span class="k">elif</span> <span class="p">(</span></tt>
            </div>
            <div id="l928"
               class="code sev- "><tt><i>928</i>             <span class="n">context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">!=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_NONE</span></tt>
            </div>
            <div id="l929"
               class="code sev- "><tt><i>929</i>             <span class="ow">and</span> <span class="ow">not</span> <span class="n">context</span><span class="o">.</span><span class="n">check_hostname</span></tt>
            </div>
            <div id="l930"
               class="code sev- "><tt><i>930</i>             <span class="ow">and</span> <span class="n">assert_hostname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span></tt>
            </div>
            <div id="l931"
               class="code sev- "><tt><i>931</i>         <span class="p">):</span></tt>
            </div>
            <div id="l932"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (95 > 79 characters)</li>
               
               </ul><tt><i>932</i>             <span class="n">cert</span><span class="p">:</span> <span class="n">_TYPE_PEER_CERT_RET_DICT</span> <span class="o">=</span> <span class="n">ssl_sock</span><span class="o">.</span><span class="n">getpeercert</span><span class="p">()</span>  <span class="c1"># type: ignore[assignment]</span></tt>
            </div>
            <div id="l933"
               class="code sev- "><tt><i>933</i> &nbsp;</tt>
            </div>
            <div id="l934"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (86 > 79 characters)</li>
               
               </ul><tt><i>934</i>             <span class="c1"># Need to signal to our match_hostname whether to use &#39;commonName&#39; or not.</span></tt>
            </div>
            <div id="l935"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (85 > 79 characters)</li>
               
               </ul><tt><i>935</i>             <span class="c1"># If we&#39;re using our own constructed SSLContext we explicitly set &#39;False&#39;</span></tt>
            </div>
            <div id="l936"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (89 > 79 characters)</li>
               
               </ul><tt><i>936</i>             <span class="c1"># because PyPy hard-codes &#39;True&#39; from SSLContext.hostname_checks_common_name.</span></tt>
            </div>
            <div id="l937"
               class="code sev- "><tt><i>937</i>             <span class="k">if</span> <span class="n">default_ssl_context</span><span class="p">:</span></tt>
            </div>
            <div id="l938"
               class="code sev- "><tt><i>938</i>                 <span class="n">hostname_checks_common_name</span> <span class="o">=</span> <span class="kc">False</span></tt>
            </div>
            <div id="l939"
               class="code sev- "><tt><i>939</i>             <span class="k">else</span><span class="p">:</span></tt>
            </div>
            <div id="l940"
               class="code sev- "><tt><i>940</i>                 <span class="n">hostname_checks_common_name</span> <span class="o">=</span> <span class="p">(</span></tt>
            </div>
            <div id="l941"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (83 > 79 characters)</li>
               
               </ul><tt><i>941</i>                     <span class="nb">getattr</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="s2">&quot;hostname_checks_common_name&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">or</span> <span class="kc">False</span></tt>
            </div>
            <div id="l942"
               class="code sev- "><tt><i>942</i>                 <span class="p">)</span></tt>
            </div>
            <div id="l943"
               class="code sev- "><tt><i>943</i> &nbsp;</tt>
            </div>
            <div id="l944"
               class="code sev- "><tt><i>944</i>             <span class="n">_match_hostname</span><span class="p">(</span></tt>
            </div>
            <div id="l945"
               class="code sev- "><tt><i>945</i>                 <span class="n">cert</span><span class="p">,</span></tt>
            </div>
            <div id="l946"
               class="code sev- "><tt><i>946</i>                 <span class="n">assert_hostname</span> <span class="ow">or</span> <span class="n">server_hostname</span><span class="p">,</span>  <span class="c1"># type: ignore[arg-type]</span></tt>
            </div>
            <div id="l947"
               class="code sev- "><tt><i>947</i>                 <span class="n">hostname_checks_common_name</span><span class="p">,</span></tt>
            </div>
            <div id="l948"
               class="code sev- "><tt><i>948</i>             <span class="p">)</span></tt>
            </div>
            <div id="l949"
               class="code sev- "><tt><i>949</i> &nbsp;</tt>
            </div>
            <div id="l950"
               class="code sev- "><tt><i>950</i>         <span class="k">return</span> <span class="n">_WrappedAndVerifiedSocket</span><span class="p">(</span></tt>
            </div>
            <div id="l951"
               class="code sev- "><tt><i>951</i>             <span class="n">socket</span><span class="o">=</span><span class="n">ssl_sock</span><span class="p">,</span></tt>
            </div>
            <div id="l952"
               class="code sev- "><tt><i>952</i>             <span class="n">is_verified</span><span class="o">=</span><span class="n">context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">==</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_REQUIRED</span></tt>
            </div>
            <div id="l953"
               class="code sev- "><tt><i>953</i>             <span class="ow">or</span> <span class="nb">bool</span><span class="p">(</span><span class="n">assert_fingerprint</span><span class="p">),</span></tt>
            </div>
            <div id="l954"
               class="code sev- "><tt><i>954</i>         <span class="p">)</span></tt>
            </div>
            <div id="l955"
               class="code sev- "><tt><i>955</i>     <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span></tt>
            </div>
            <div id="l956"
               class="code sev- "><tt><i>956</i>         <span class="n">ssl_sock</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></tt>
            </div>
            <div id="l957"
               class="code sev- "><tt><i>957</i>         <span class="k">raise</span></tt>
            </div>
            <div id="l958"
               class="code sev- "><tt><i>958</i> &nbsp;</tt>
            </div>
            <div id="l959"
               class="code sev- "><tt><i>959</i> &nbsp;</tt>
            </div>
            <div id="l960"
               class="code sev- "><tt><i>960</i> <span class="k">def</span> <span class="nf">_match_hostname</span><span class="p">(</span></tt>
            </div>
            <div id="l961"
               class="code sev- "><tt><i>961</i>     <span class="n">cert</span><span class="p">:</span> <span class="n">_TYPE_PEER_CERT_RET_DICT</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span></tt>
            </div>
            <div id="l962"
               class="code sev- "><tt><i>962</i>     <span class="n">asserted_hostname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span></tt>
            </div>
            <div id="l963"
               class="code sev- "><tt><i>963</i>     <span class="n">hostname_checks_common_name</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span></tt>
            </div>
            <div id="l964"
               class="code sev- "><tt><i>964</i> <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></tt>
            </div>
            <div id="l965"
               class="code sev- "><tt><i>965</i>     <span class="c1"># Our upstream implementation of ssl.match_hostname()</span></tt>
            </div>
            <div id="l966"
               class="code sev- "><tt><i>966</i>     <span class="c1"># only applies this normalization to IP addresses so it doesn&#39;t</span></tt>
            </div>
            <div id="l967"
               class="code sev- "><tt><i>967</i>     <span class="c1"># match DNS SANs so we do the same thing!</span></tt>
            </div>
            <div id="l968"
               class="code sev- "><tt><i>968</i>     <span class="n">stripped_hostname</span> <span class="o">=</span> <span class="n">asserted_hostname</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;[]&quot;</span><span class="p">)</span></tt>
            </div>
            <div id="l969"
               class="code sev- "><tt><i>969</i>     <span class="k">if</span> <span class="n">is_ipaddress</span><span class="p">(</span><span class="n">stripped_hostname</span><span class="p">):</span></tt>
            </div>
            <div id="l970"
               class="code sev- "><tt><i>970</i>         <span class="n">asserted_hostname</span> <span class="o">=</span> <span class="n">stripped_hostname</span></tt>
            </div>
            <div id="l971"
               class="code sev- "><tt><i>971</i> &nbsp;</tt>
            </div>
            <div id="l972"
               class="code sev- "><tt><i>972</i>     <span class="k">try</span><span class="p">:</span></tt>
            </div>
            <div id="l973"
               class="code sev- "><tt><i>973</i>         <span class="n">match_hostname</span><span class="p">(</span><span class="n">cert</span><span class="p">,</span> <span class="n">asserted_hostname</span><span class="p">,</span> <span class="n">hostname_checks_common_name</span><span class="p">)</span></tt>
            </div>
            <div id="l974"
               class="code sev- "><tt><i>974</i>     <span class="k">except</span> <span class="n">CertificateError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span></tt>
            </div>
            <div id="l975"
               class="code sev- "><tt><i>975</i>         <span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span></tt>
            </div>
            <div id="l976"
               class="code sev- "><tt><i>976</i>             <span class="s2">&quot;Certificate did not match expected hostname: </span><span class="si">%s</span><span class="s2">. Certificate: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l977"
               class="code sev- "><tt><i>977</i>             <span class="n">asserted_hostname</span><span class="p">,</span></tt>
            </div>
            <div id="l978"
               class="code sev- "><tt><i>978</i>             <span class="n">cert</span><span class="p">,</span></tt>
            </div>
            <div id="l979"
               class="code sev- "><tt><i>979</i>         <span class="p">)</span></tt>
            </div>
            <div id="l980"
               class="code sev- "><tt><i>980</i>         <span class="c1"># Add cert to exception and reraise so client code can inspect</span></tt>
            </div>
            <div id="l981"
               class="code sev- "><tt><i>981</i>         <span class="c1"># the cert when catching the exception, if they want to</span></tt>
            </div>
            <div id="l982"
               class="code sev- "><tt><i>982</i>         <span class="n">e</span><span class="o">.</span><span class="n">_peer_cert</span> <span class="o">=</span> <span class="n">cert</span>  <span class="c1"># type: ignore[attr-defined]</span></tt>
            </div>
            <div id="l983"
               class="code sev- "><tt><i>983</i>         <span class="k">raise</span></tt>
            </div>
            <div id="l984"
               class="code sev- "><tt><i>984</i> &nbsp;</tt>
            </div>
            <div id="l985"
               class="code sev- "><tt><i>985</i> &nbsp;</tt>
            </div>
            <div id="l986"
               class="code sev- "><tt><i>986</i> <span class="k">def</span> <span class="nf">_wrap_proxy_error</span><span class="p">(</span><span class="n">err</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">proxy_scheme</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProxyError</span><span class="p">:</span></tt>
            </div>
            <div id="l987"
               class="code sev- "><tt><i>987</i>     <span class="c1"># Look for the phrase &#39;wrong version number&#39;, if found</span></tt>
            </div>
            <div id="l988"
               class="code sev- "><tt><i>988</i>     <span class="c1"># then we should warn the user that we&#39;re very sure that</span></tt>
            </div>
            <div id="l989"
               class="code sev- "><tt><i>989</i>     <span class="c1"># this proxy is HTTP-only and they have a configuration issue.</span></tt>
            </div>
            <div id="l990"
               class="code sev- "><tt><i>990</i>     <span class="n">error_normalized</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;[^a-z]&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()))</span></tt>
            </div>
            <div id="l991"
               class="code sev- "><tt><i>991</i>     <span class="n">is_likely_http_proxy</span> <span class="o">=</span> <span class="p">(</span></tt>
            </div>
            <div id="l992"
               class="code sev- "><tt><i>992</i>         <span class="s2">&quot;wrong version number&quot;</span> <span class="ow">in</span> <span class="n">error_normalized</span></tt>
            </div>
            <div id="l993"
               class="code sev- "><tt><i>993</i>         <span class="ow">or</span> <span class="s2">&quot;unknown protocol&quot;</span> <span class="ow">in</span> <span class="n">error_normalized</span></tt>
            </div>
            <div id="l994"
               class="code sev- "><tt><i>994</i>         <span class="ow">or</span> <span class="s2">&quot;record layer failure&quot;</span> <span class="ow">in</span> <span class="n">error_normalized</span></tt>
            </div>
            <div id="l995"
               class="code sev- "><tt><i>995</i>     <span class="p">)</span></tt>
            </div>
            <div id="l996"
               class="code sev- "><tt><i>996</i>     <span class="n">http_proxy_warning</span> <span class="o">=</span> <span class="p">(</span></tt>
            </div>
            <div id="l997"
               class="code sev- "><tt><i>997</i>         <span class="s2">&quot;. Your proxy appears to only use HTTP and not HTTPS, &quot;</span></tt>
            </div>
            <div id="l998"
               class="code sev- "><tt><i>998</i>         <span class="s2">&quot;try changing your proxy URL to be HTTP. See: &quot;</span></tt>
            </div>
            <div id="l999"
               class="code sev- "><tt><i>999</i>         <span class="s2">&quot;https://urllib3.readthedocs.io/en/latest/advanced-usage.html&quot;</span></tt>
            </div>
            <div id="l1000"
               class="code sev- "><tt><i>1000</i>         <span class="s2">&quot;#https-proxy-error-http-proxy&quot;</span></tt>
            </div>
            <div id="l1001"
               class="code sev- "><tt><i>1001</i>     <span class="p">)</span></tt>
            </div>
            <div id="l1002"
               class="code sev- "><tt><i>1002</i>     <span class="n">new_err</span> <span class="o">=</span> <span class="n">ProxyError</span><span class="p">(</span></tt>
            </div>
            <div id="l1003"
               class="code sev- "><tt><i>1003</i>         <span class="sa">f</span><span class="s2">&quot;Unable to connect to proxy&quot;</span></tt>
            </div>
            <div id="l1004"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (92 > 79 characters)</li>
               
               </ul><tt><i>1004</i>         <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">http_proxy_warning</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_likely_http_proxy</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">proxy_scheme</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;https&#39;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span></tt>
            </div>
            <div id="l1005"
               class="code sev- "><tt><i>1005</i>         <span class="n">err</span><span class="p">,</span></tt>
            </div>
            <div id="l1006"
               class="code sev- "><tt><i>1006</i>     <span class="p">)</span></tt>
            </div>
            <div id="l1007"
               class="code sev- "><tt><i>1007</i>     <span class="n">new_err</span><span class="o">.</span><span class="n">__cause__</span> <span class="o">=</span> <span class="n">err</span></tt>
            </div>
            <div id="l1008"
               class="code sev- "><tt><i>1008</i>     <span class="k">return</span> <span class="n">new_err</span></tt>
            </div>
            <div id="l1009"
               class="code sev- "><tt><i>1009</i> &nbsp;</tt>
            </div>
            <div id="l1010"
               class="code sev- "><tt><i>1010</i> &nbsp;</tt>
            </div>
            <div id="l1011"
               class="code sev- "><tt><i>1011</i> <span class="k">def</span> <span class="nf">_get_default_user_agent</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></tt>
            </div>
            <div id="l1012"
               class="code sev- "><tt><i>1012</i>     <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;python-urllib3/</span><span class="si">{</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span></tt>
            </div>
            <div id="l1013"
               class="code sev- "><tt><i>1013</i> &nbsp;</tt>
            </div>
            <div id="l1014"
               class="code sev- "><tt><i>1014</i> &nbsp;</tt>
            </div>
            <div id="l1015"
               class="code sev- "><tt><i>1015</i> <span class="k">class</span> <span class="nc">DummyConnection</span><span class="p">:</span></tt>
            </div>
            <div id="l1016"
               class="code sev- "><tt><i>1016</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;Used to detect a failed ConnectionCls import.&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l1017"
               class="code sev- "><tt><i>1017</i> &nbsp;</tt>
            </div>
            <div id="l1018"
               class="code sev- "><tt><i>1018</i> &nbsp;</tt>
            </div>
            <div id="l1019"
               class="code sev- "><tt><i>1019</i> <span class="k">if</span> <span class="ow">not</span> <span class="n">ssl</span><span class="p">:</span></tt>
            </div>
            <div id="l1020"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (84 > 79 characters)</li>
               
               </ul><tt><i>1020</i>     <span class="n">HTTPSConnection</span> <span class="o">=</span> <span class="n">DummyConnection</span>  <span class="c1"># type: ignore[misc, assignment] # noqa: F811</span></tt>
            </div>
            <div id="l1021"
               class="code sev- "><tt><i>1021</i> &nbsp;</tt>
            </div>
            <div id="l1022"
               class="code sev- "><tt><i>1022</i> &nbsp;</tt>
            </div>
            <div id="l1023"
               class="code sev- "><tt><i>1023</i> <span class="n">VerifiedHTTPSConnection</span> <span class="o">=</span> <span class="n">HTTPSConnection</span></tt>
            </div>
            <div id="l1024"
               class="code sev- "><tt><i>1024</i> &nbsp;</tt>
            </div>
            <div id="l1025"
               class="code sev- "><tt><i>1025</i> &nbsp;</tt>
            </div>
            <div id="l1026"
               class="code sev- "><tt><i>1026</i> <span class="k">def</span> <span class="nf">_url_from_connection</span><span class="p">(</span></tt>
            </div>
            <div id="l1027"
               class="code sev- "><tt><i>1027</i>     <span class="n">conn</span><span class="p">:</span> <span class="n">HTTPConnection</span> <span class="o">|</span> <span class="n">HTTPSConnection</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span></tt>
            </div>
            <div id="l1028"
               class="code sev- "><tt><i>1028</i> <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span></tt>
            </div>
            <div id="l1029"
               class="code sev-2  le">
               <ul class="violations">
               
                  <li>
                     <span class="count sev-2">
                        E501
                     </span>
                     Line too long (95 > 79 characters)</li>
               
               </ul><tt><i>1029</i> <span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the URL from a given connection. This is mainly used for testing and logging.&quot;&quot;&quot;</span></tt>
            </div>
            <div id="l1030"
               class="code sev- "><tt><i>1030</i> &nbsp;</tt>
            </div>
            <div id="l1031"
               class="code sev- "><tt><i>1031</i>     <span class="n">scheme</span> <span class="o">=</span> <span class="s2">&quot;https&quot;</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span> <span class="n">HTTPSConnection</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;http&quot;</span></tt>
            </div>
            <div id="l1032"
               class="code sev- "><tt><i>1032</i> &nbsp;</tt>
            </div>
            <div id="l1033"
               class="code sev- "><tt><i>1033</i>     <span class="k">return</span> <span class="n">Url</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">conn</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">url</span></tt>
            </div>
            
         </div>
      </div>
   </body>
</html>